<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Huddlie</title>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="fo-verify" content="0e69931a-6da1-48e9-8ba3-40c410e196a8">
  <meta property="fb:app_id"        content="1881552072106664">
  <meta property="og:url"           content="https://www.huddlie.com/" />
  <meta property="og:type"          content="website" />
  <meta property="og:title"         content="Huddlie" />
  <meta property="og:description"   content="Shop together with your friends" />
  <meta property="og:image"         content="https://www.huddlie.com/huddlie-200x200.png" />

	
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script
    src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
    crossorigin="anonymous"></script>


  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.css">
	
  <script src="/socket.io/socket.io.js"> </script>

  <script src="https://simplewebrtc.com/latest-v2.js"></script> 
  <script src="/assets/js/bundle.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
  
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.11/css/all.css" integrity="sha384-p2jx59pefphTFIpeqCcISO9MdVfIm4pNnsL08A6v5vaQc4owkQqxMV8kg4Yvhaw/" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.matchHeight/0.7.0/jquery.matchHeight.js" type="text/javascript"></script>

  <link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/style.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/main.css">

  <!-- Custom Stylesheets -->
  <link rel="stylesheet" type="text/css" href="/assets/css/custom/flyout.css">
	<!-- End Custom Stylesheets -->
  
  <link rel="shortcut icon" type="image/png" href="/favicon.png"/>

</head>
<body>

<div id="fb-root"></div>
<script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0&appId=1881552072106664&autoLogAppEvents=1';
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<div id="navbar-outerDiv">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>    
    <a id="headerLogo" onclick="viewController('homeBanner');" class="brand"><img src="/huddlie-h35.png"> </a>
  </div>
  <div id="navbar" class="navbar-collapse collapse">
    <ul class="nav navbar-nav">
      <li style="width: 50px" class="hidden-xs hidden-sm">
      </li>
      <li class="paddingLeft20">
        <input type="text" name="" class="form-control" id="searchWords" placeholder="Search" style="width: 100%; display:none">
      </li>
      <li class="paddingRight20">
        <input type="submit" id="searchButton" class="btn btn-primary" value="Search" style="width:100%;margin:0;display:none" />
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li class="paddingRight20">
        <button id="cartMainButton" type="button" class="btn btn-primary" onclick="viewCart()" style="width:100%; display:none;">
                        </button> 
      </li>
      <li>
        <input type="text" name="feedback" class="form-control" id="feedbackText" placeholder="Enter Feedback"
                                style="width:100%;min-width:220px">
      </li>
      <li class="paddingRight20">
        <button id="feedbackSubmitButton" class="btn btn-primary" type="button" style="width: 100%" onclick="feedbackSubmitButtonClicked();">Submit</button>
      </li>
      <li class="paddingRight10 chatViewButtonOuter">
        <label>
                Click to invite your friends
        </label>
        <span class="glyphicon glyphicon-arrow-right" aria-hidden="true" style="color:white;top:-8px"></span>
      </li>
      <li class="chatViewButtonOuter">
        <button id="chatViewButton" class="btn btn-info" type="button" onclick="chatViewButtonClicked();" style="width:100%;">Huddle Up!
        </button>
      </li>
    </ul>
  </div>
  <select class="form-control" id="selectDept" onchange="departmentChanged()" style="display:none; width:100%; min-width:120px;">
  </select>

  <select class="form-control" id="selectRetailer" onchange="retailerChanged()" 
          style="display:none; width:100%; min-width:0px;">
      <option value="US">Amazon USA</option>
      <option value="IN">Amazon India</option>
  </select>
</div>
  <!--/.nav-collapse -->

<div class="overlay">
  <div class="loader"></div>
</div>


<div class="row" id="container">
    <div class="alert warning" id="throttleAlertBox">
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
      You are submitting requests too quickly. Please retry your requests at a slower rate.
    </div>
    <div id="tabSelector" class="tabSelectorChatOn" style="display:none;">
            <button id="sharedTabButton" class="btn btn-xs btn-success" 
                        style="width:50%; float:left; margin:0px" 
                        onclick="sharedTab();">Shared Tab</button>
            <button id="personalTabButton" class="btn btn-xs btn-basic" 
                        style="width:50%; float:left; margin:0px" 
                        onclick="personalTab();">Personal Tab</button>
    </div>
    <div id="mainPane" class="mainPaneChatOff">
        <!-- Home page div/Banners Area -->
        <div id="bannersArea" class="col-md-12" style="background-color:white">
            <!-- Amazon Banner -->
            <div style="text-align: center; background-color:white;" class="row">
                <div class="col-md-12" style="background-color: #ffffff; vertical-align: middle;">
                    <h3 style="vertical-align: middle; color:#3f4a68">Select your region</h3>
                </div>
            </div>
            <div style="text-align: center; background-color:white;" class="row">
                <ul class="list-inline">
                    <li>
                        <button id="retailerButton-US" type="button" 
                            class="btn btn-default retailerButtons retailerButtonLeft" onclick="retailerSelected('US',true);">USA</button>
                    </li>
                    <li>
                        <button id="retailerButton-IN" type="button" 
                            class="btn btn-default retailerButtons retailerButtonRight" onclick="retailerSelected('IN',true);">India</button>
                    </li>
                </ul>
            </div> 


                    <!-- START MULTISELECT AREA -->
                    <div id="multiSelectArea" style="display:none">
                        <div style="text-align: center; background-color:white;" class="row">
                            <hr style="border-top: 1px solid #8c8b8b; width:90%;">
                            <div class="col-md-12" style="background-color: #ffffff; vertical-align: middle;">
                                <h3 style="vertical-align: middle; color:#3f4a68">Select the category you would like to browse</h3>
                                <h5 style="vertical-align: middle; color:#3f4a68">Hover over a department to see more refined options, and click on a category to shop</h5>
                            </div>
                        </div>

                        <div class="row">
                            <div id="flyoutDivAmazonUS" class="col-md-12 text-center pagination-centered">
                                
                                <ul id="flyoutTopLevelList" class="list-inline float-flyout-US">
                                    <li id="flyoutUSNode-Women" class="flyout0Node selectedFlyout0Node" onmouseover="hoverFlyout0Node('flyoutUSNode-Women','flyoutUSDetailDiv-Women')">
                                        <label>Women</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutUSNode-Men" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutUSNode-Men','flyoutUSDetailDiv-Men')">
                                        <label>Men</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutUSNode-Kids" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutUSNode-Kids','flyoutUSDetailDiv-Kids')">
                                        <label>Kids</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutUSNode-Baby" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutUSNode-Baby','flyoutUSDetailDiv-Baby')">
                                        <label>Baby</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutUSNode-Beauty" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutUSNode-Beauty','flyoutUSDetailDiv-Beauty')">
                                        <label>Beauty &amp; Personal Care</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutUSNode-Sports" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutUSNode-Sports','flyoutUSDetailDiv-Sports')">
                                        <label>Sports &amp; Fitness</label>
                                        <span class="caret"></span>
                                    </li>
                                </ul>                               

                                <div id="flyoutUSDetailDiv-Women" class="flyoutDetailDiv selectedFlyoutDetailDiv text-left">
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1040660','Clothing','FashionWomen');">
                                                <label>Clothing</label>
                                            </li> 
                                            <li onclick="flyoutNodeClicked('1045024','Dresses','FashionWomen')">
                                                <label>Dresses</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2368343011','Tops & Tees','FashionWomen')">
                                                <label>Tops &amp; Tees</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1044456','Sweaters','FashionWomen')">
                                                <label>Sweaters</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1048188','Jeans','FashionWomen')">
                                                <label>Jeans</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1048184','Pants','FashionWomen')">
                                                <label>Pants</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1045022','Skirts','FashionWomen')">
                                                <label>Skirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1048186','Shorts','FashionWomen')">
                                                <label>Shorts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3456051','Activewear','FashionWomen')">
                                                <label>Activewear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1046622','Swimsuits & Cover Ups','FashionWomen')">
                                                <label>Swimsuits &amp; Cover Ups</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1044646','Coats, Jackets & Vests','FashionWomen')">
                                                <label>Coats, Jackets &amp; Vests</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9522932011','Suiting & Blazers','FashionWomen')">
                                                <label>Suiting &amp; Blazers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9522931011','Lingerie, Sleep & Lounge','FashionWomen')">
                                                <label>Lingerie, Sleep &amp; Lounge</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1044886','Socks & Hosiery','FashionWomen')">
                                                <label>Socks &amp; Hosiery</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('679337011','Shoes','FashionWomen')">
                                                <label>Shoes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('6127771011','Athletic','FashionWomen')">
                                                <label>Athletic</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679394011','Fashion Sneakers','FashionWomen')">
                                                <label>Fashion Sneakers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679380011','Boots','FashionWomen')">
                                                <label>Boots</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679399011','Flats','FashionWomen')">
                                                <label>Flats</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679416011','Pumps','FashionWomen')">
                                                <label>Pumps</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('6127767011','Outdoor','FashionWomen')">
                                                <label>Outdoor</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679425011','Sandals','FashionWomen')">
                                                <label>Sandals</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679433011','Slippers','FashionWomen')">
                                                <label>Slippers</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('6358543011','Watches','FashionWomen')">
                                                <label>Watches</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('6358544011','Wrist Watches','FashionWomen')">
                                                <label>Wrist Watches</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('14130291011','Smartwatches','FashionWomen')">
                                                <label>Smartwatches</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13779933011','Certified Pre-Owned','FashionWomen')">
                                                <label>Certified Pre-Owned</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7192394011','Jewelry','FashionWomen')">
                                                <label>Jewelry</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7454897011','Anklets','FashionWomen')">
                                                <label>Anklets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7454898011','Bracelets','FashionWomen')">
                                                <label>Bracelets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7454917011','Earrings','FashionWomen')">
                                                <label>Earrings</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7454926011','Jewelry Sets','FashionWomen')">
                                                <label>Jewelry Sets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7454927011','Necklaces','FashionWomen')">
                                                <label>Necklaces</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7454939011','Rings','FashionWomen')">
                                                <label>Rings</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9539894011','Wedding & Engagement','FashionWomen')">
                                                <label>Wedding &amp; Engagement</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2474936011','Accessories','FashionWomen')">
                                                <label>Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474940011','Belts','FashionWomen')">
                                                <label>Belts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7072321011','Sunglasses & Eyewear Accessories','FashionWomen')">
                                                <label>Sunglasses &amp; Eyewear Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7072324011','Scarves & Wraps','FashionWomen')">
                                                <label>Scarves &amp; Wraps</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474945011','Hats & Caps','FashionWomen')">
                                                <label>Hats &amp; Caps</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('15743631','Handbags & Wallets','FashionWomen')">
                                                <label>Handbags &amp; Wallets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2475899011','Crossbody Bags','FashionWomen')">
                                                <label>Crossbody Bags</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('17037745011','Clutches & Evening Bags','FashionWomen')">
                                                <label>Clutches &amp; Evening Bags</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('16977745011','Fashion Backpacks','FashionWomen')">
                                                <label>Fashion Backpacks</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3421075011','Shoulder Bags','FashionWomen')">
                                                <label>Shoulder Bags</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2475898011','Wallets','FashionWomen')">
                                                <label>Wallets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('16977746011','Totes','FashionWomen')">
                                                <label>Totes</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7581668011','Shops','FashionWomen')">
                                                <label>Shops</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11300394011','Contemporary & Designer','FashionWomen')">
                                                <label>Contemporary &amp; Designer</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7581674011','Juniors','FashionWomen')">
                                                <label>Juniors</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7581675011','Maternity','FashionWomen')">
                                                <label>Maternity</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7581676011','Petite','FashionWomen')">
                                                <label>Petite</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7581677011','Plus-Size','FashionWomen')">
                                                <label>Plus-Size</label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div id="flyoutUSDetailDiv-Men" class="flyoutDetailDiv text-left">
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1040658','Clothing','FashionMen');">
                                                <label>Clothing</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2476517011','Shirts','FashionMen')">
                                                <label>Shirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1258644011','Fashion Hoodies & Sweatshirts','FashionMen')">
                                                <label>Fashion Hoodies &amp; Sweatshirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1044442','Sweaters','FashionMen')">
                                                <label>Sweaters</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1045830','Jackets & Coats','FashionMen')">
                                                <label>Jackets &amp; Coats</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1045564','Jeans','FashionMen')">
                                                <label>Jeans</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1045558','Pants','FashionMen')">
                                                <label>Pants</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3455821','Active','FashionMen')">
                                                <label>Active</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1046670','Swim','FashionMen')">
                                                <label>Swim</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1045684','Suits & Sport Coats','FashionMen')">
                                                <label>Suits &amp; Sport Coats</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1045708','Socks','FashionMen')">
                                                <label>Socks</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3455861','Sleep & Lounge','FashionMen')">
                                                <label>Sleep &amp; Lounge</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('15697821011','T-Shirts & Tanks','FashionMen')">
                                                <label>T-Shirts &amp; Tanks</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1045560','Shorts','FashionMen')">
                                                <label>Shorts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1045706','Underwear','FashionMen')">
                                                <label>Underwear</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('679255011','Shoes','FashionMen')">
                                                <label>Shoes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679307011','Boots','FashionMen')">
                                                <label>Boots</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('6127770011','Athletic','FashionMen')">
                                                <label>Athletic</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679312011','Fashion Sneakers','FashionMen')">
                                                <label>Fashion Sneakers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679313011','Loafers & Slip-Ons','FashionMen')">
                                                <label>Loafers &amp; Slip-Ons</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3420996011','Mules & Clogs','FashionMen')">
                                                <label>Mules &amp; Clogs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('6127766011','Outdoor','FashionMen')">
                                                <label>Outdoor</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679319011','Oxfords','FashionMen')">
                                                <label>Oxfords</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('679320011','Sandals','FashionMen')">
                                                <label>Sandals</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('6358539011','Watches','FashionMen')">
                                                <label>Watches</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('6358540011','Wrist Watches','FashionMen')">
                                                <label>Wrist Watches</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('14130292011','Smartwatches','FashionMen')">
                                                <label>Smartwatches</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13779934011','Certified Pre-Owned','FashionMen')">
                                                <label>Certified Pre-Owned</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2474937011','Accessories','FashionMen')">
                                                <label>Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474995011','Sunglasses','FashionMen')">
                                                <label>Sunglasses</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2475895011','Wallets','FashionMen')">
                                                <label>Wallets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474947011','Belts','FashionMen')">
                                                <label>Belts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474956011','Suspenders','FashionMen')">
                                                <label>Suspenders</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474955011','Neckties','FashionMen')">
                                                <label>Neckties</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7072328011','Bow Ties & Cummerbunds','FashionMen')">
                                                <label>Bow Ties &amp; Cummerbunds</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7072329011','Cuff Links, Shirt Studs & Tie Clips','FashionMen')">
                                                <label>Cuff Links, Shirt Studs &amp; Tie Clips</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11002536011','Collar Stays','FashionMen')">
                                                <label>Collar Stays</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7072332011','Scarves','FashionMen')">
                                                <label>Scarves</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474986011','Earmuffs','FashionMen')">
                                                <label>Earmuffs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7072331011','Gloves & Mittens','FashionMen')">
                                                <label>Gloves &amp; Mittens</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474954011','Hats & Caps','FashionMen')">
                                                <label>Hats &amp; Caps</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2475889011','Keyrings & Keychains','FashionMen')">
                                                <label>Keyrings &amp; Keychains</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2474953011','Handkerchiefs','FashionMen')">
                                                <label>Handkerchiefs</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3887881','Jewelry','FashionMen')">
                                                <label>Jewelry</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3888131','Cuff Links','FashionMen')">
                                                <label>Cuff Links</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3888171','Rings','FashionMen')">
                                                <label>Rings</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3888391','Tie Clips','FashionMen')">
                                                <label>Tie Clips</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3888381','Shirt Studs','FashionMen')">
                                                <label>Shirt Studs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3888411','Tie Pins','FashionMen')">
                                                <label>Tie Pins</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9523408011','Religious','FashionMen')">
                                                <label>Religious</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9539904011','Wedding Rings','FashionMen')">
                                                <label>Wedding Rings</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7581669011','Shops','FashionMen')">
                                                <label>Shops</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11307730011','Contemporary & Designer','FashionMen')">
                                                <label>Contemporary &amp; Designer</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7581681011','Big & Tall','FashionMen')">
                                                <label>Big &amp; Tall</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('7581682011','Uniforms, Work & Safety','FashionMen')">
                                                <label>Uniforms, Work &amp; Safety</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9564525011','Surf, Skate & Street','FashionMen')">
                                                <label>Surf, Skate &amp; Street</label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Flyout details of 3rd level node. -->
                                <div id="flyoutUSDetailDiv-Kids" class="flyoutDetailDiv text-left">
                                    <div class="col-md-6">
                                        <div class="col-md-12 text-center">
                                            <label>Girls</label>
                                        </div>   
                                        <div class="col-md-6 box">    
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1040664','Clothing','FashionGirls')">
                                                    <label>Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1288617011','Clothing Sets','FashionGirls')">
                                                    <label>Clothing Sets</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045470','Dresses','FashionGirls')">
                                                    <label>Dresses</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1044490','Tops & Tees','FashionGirls')">
                                                    <label>Tops &amp; Tees</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3455741','Sweaters','FashionGirls')">
                                                    <label>Sweaters</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045268','Jeans','FashionGirls')">
                                                    <label>Jeans</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2412731011','Leggings','FashionGirls')">
                                                    <label>Leggings</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045424','Sleepwear & Robes','FashionGirls')">
                                                    <label>Sleepwear &amp; Robes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3455751','Swim','FashionGirls')">
                                                    <label>Swim</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045206','Jackets & Coats','FashionGirls')">
                                                    <label>Jackets &amp; Coats</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045428','Underwear','FashionGirls')">
                                                    <label>Underwear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045426','Socks & Tights','FashionGirls')">
                                                    <label>Socks &amp; Tights</label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 bg-gray box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('679217011','Shoes','FashionGirls')">
                                                    <label>Shoes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('6127769011','Athletic','FashionGirls')">
                                                    <label>Athletic</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3420847011','Boots','FashionGirls')">
                                                    <label>Boots</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3420851011','Flats','FashionGirls')">
                                                    <label>Flats</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('6127765011','Outdoor','FashionGirls')">
                                                    <label>Outdoor</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3420855011','Sandals','FashionGirls')">
                                                    <label>Sandals</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3420857011','Sneakers','FashionGirls')">
                                                    <label>Sneakers</label>
                                                </li>
                                                <li>
                                                    <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3880961','Jewelry','FashionGirls')">
                                                    <label>Jewelry</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('6358547011','Watches','FashionGirls')">
                                                    <label>Watches</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2474938011','Accessories','FashionGirls')">
                                                    <label>Accessories</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7581670011','School Uniforms','FashionGirls')">
                                                    <label>School Uniforms</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div> 
                                    <div class="col-md-6">
                                        <div class="col-md-12 text-center">
                                            <label>Boys</label>
                                        </div>
                                        <div class="col-md-6 box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1040666','Clothing','FashionBoys')">
                                                    <label>Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1288606011','Clothing Sets','FashionBoys')">
                                                    <label>Clothing Sets</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2422483011','Tops & Tees','FashionBoys')">
                                                    <label>Tops &amp; Tees</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045972','Button-Down & Dress Shirts','FashionBoys')">
                                                    <label>Button-Down &amp; Dress Shirts</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('5604815011','Fashion Hoodies & Sweatshirts','FashionBoys')">
                                                    <label>Fashion Hoodies &amp; Sweatshirts</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045910','Jeans','FashionBoys')">
                                                    <label>Jeans</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3455641','Active','FashionBoys')">
                                                    <label>Active</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1045904','Pants','FashionBoys')">
                                                    <label>Pants</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1046120','Jackets & Coats','FashionBoys')">
                                                    <label>Jackets &amp; Coats</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1046030','Socks','FashionBoys')">
                                                    <label>Socks</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3455651','Sleepwear & Robes','FashionBoys')">
                                                    <label>Sleepwear &amp; Robes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1046028','Underwear','FashionBoys')">
                                                    <label>Underwear</label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 bg-gray box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('679182011','Shoes','FashionBoys')">
                                                    <label>Shoes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('6127768011','Athletic','FashionBoys')">
                                                    <label>Athletic</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3420707011','Boots','FashionBoys')">
                                                    <label>Boots</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3420712011','Loafers','FashionBoys')">
                                                    <label>Loafers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('6127764011','Outdoor','FashionBoys')">
                                                    <label>Outdoor</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3420714011','Sandals','FashionBoys')">
                                                    <label>Sandals</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3420717011','Sneakers','FashionBoys')">
                                                    <label>Sneakers</label>
                                                </li>
                                                <li>
                                                    <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3880611','Jewelry','FashionBoys')">
                                                    <label>Jewelry</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('6358551011','Watches','FashionBoys')">
                                                    <label>Watches</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2474939011','Accessories','FashionBoys')">
                                                    <label>Accessories</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7581671011','School Uniforms','FashionBoys')">
                                                    <label>School Uniforms</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>                         
                                <!-- Flyout details of 4th level node. -->    
                                <div id="flyoutUSDetailDiv-Baby" class="flyoutDetailDiv text-left">
                                    <div class="col-md-6">
                                        <div class="col-md-12 text-center">
                                            <label>Baby Girls</label>
                                        </div>
                                        <div class="col-md-6 box">    
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1044512','Clothing','FashionBaby')">
                                                    <label>Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1046236','Bodysuits','FashionBaby')">
                                                    <label>Bodysuits</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3526420011','Footies & Rompers','FashionBaby')">
                                                    <label>Footies &amp; Rompers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('13697531','Clothing Sets','FashionBaby')">
                                                    <label>Clothing Sets</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1044542','Dresses','FashionBaby')">
                                                    <label>Dresses</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1044532','Tops','FashionBaby')">
                                                    <label>Tops</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1046240','Sweaters','FashionBaby')">
                                                    <label>Sweaters</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2475784011','Hoodies & Active','FashionBaby')">
                                                    <label>Hoodies &amp; Active</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2475796011','Sleepwear & Robes','FashionBaby')">
                                                    <label>Sleepwear &amp; Robes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3526419011','Bottoms','FashionBaby')">
                                                    <label>Bottoms</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2230684011','Jackets & Coats','FashionBaby')">
                                                    <label>Jackets &amp; Coats</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1044536','Bloomers, Diaper Covers & Underwear','FashionBaby')">
                                                    <label>Bloomers, Diaper Covers &amp; Underwear</label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 bg-gray box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7239798011','Shoes','FashionBaby')">
                                                    <label>Shoes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947910011','Athletic & Outdoor','FashionBaby')">
                                                    <label>Athletic &amp; Outdoor</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947917011','Boots','FashionBaby')">
                                                    <label>Boots</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947919011','Flats','FashionBaby')">
                                                    <label>Flats</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947925011','Sandals','FashionBaby')">
                                                    <label>Sandals</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947926011','Slippers','FashionBaby')">
                                                    <label>Slippers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947927011','Sneakers','FashionBaby')">
                                                    <label>Sneakers</label>
                                                </li>
                                                <li>
                                                    <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2478435011','Accessories','FashionBaby')">
                                                    <label>Accessories</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1258892011','Socks','FashionBaby')">
                                                    <label>Socks</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2478439011','Hats & Caps','FashionBaby')">
                                                    <label>Hats &amp; Caps</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2478438011','Gloves & Mittens','FashionBaby')">
                                                    <label>Gloves &amp; Mittens</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="col-md-12 text-center">
                                            <label>Baby Boys</label>
                                        </div>                      
                                        <div class="col-md-6 box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1044510','Clothing','FashionBaby')">
                                                    <label>Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1046184','Bodysuits','FashionBaby')">
                                                    <label>Bodysuits</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3526415011','Footies & Rompers','FashionBaby')">
                                                    <label>Footies &amp; Rompers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2475852011','Layette Sets','FashionBaby')">
                                                    <label>Layette Sets</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('13698211','Clothing Sets','FashionBaby')">
                                                    <label>Clothing Sets</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2475819011','Tops','FashionBaby')">
                                                    <label>Tops</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1046188','Sweaters','FashionBaby')">
                                                    <label>Sweaters</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2475824011','Hoodies & Active','FashionBaby')">
                                                    <label>Hoodies &amp; Active</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3526414011','Bottoms','FashionBaby')">
                                                    <label>Bottoms</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2230685011','Jackets & Coats','FashionBaby')">
                                                    <label>Jackets &amp; Coats</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2475836011','Sleepwear & Robes','FashionBaby')">
                                                    <label>Sleepwear &amp; Robes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1044522','Bloomers, Diaper Covers & Underwear','FashionBaby')">
                                                    <label>Bloomers, Diaper Covers &amp; Underwear</label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 bg-gray box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7239799011','Shoes','FashionBaby')">
                                                    <label>Shoes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947928011','Athletic & Outdoor','FashionBaby')">
                                                    <label>Athletic &amp; Outdoor</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947933011','Boots','FashionBaby')">
                                                    <label>Boots</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947935011','Oxfords & Loafers','FashionBaby')">
                                                    <label>Oxfords &amp; Loafers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947938011','Sandals','FashionBaby')">
                                                    <label>Sandals</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947939011','Slippers','FashionBaby')">
                                                    <label>Slippers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('8947940011','Sneakers','FashionBaby')">
                                                    <label>Sneakers</label>
                                                </li>
                                                <li>
                                                    <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2478436011','Accessories','FashionBaby')">
                                                    <label>Accessories</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1046202','Socks','FashionBaby')">
                                                    <label>Socks</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2478444011','Hats & Caps','FashionBaby')">
                                                    <label>Hats &amp; Caps</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2478443011','Gloves & Mittens','FashionBaby')">
                                                    <label>Gloves &amp; Mittens</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>        
                                <!-- Flyout details of 5th level node. -->                      
                                <div id="flyoutUSDetailDiv-Beauty" class="flyoutDetailDiv text-left">
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11058281','Makeup','Beauty')">
                                                <label>Makeup</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11058331','Eyes','Beauty')">
                                                <label>Eyes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11058291','Body','Beauty')">
                                                <label>Body</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11058691','Face','Beauty')">
                                                <label>Face</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11059031','Lips','Beauty')">
                                                <label>Lips</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2265896011','Makeup Palettes','Beauty')">
                                                <label>Makeup Palettes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11059231','Makeup Remover','Beauty')">
                                                <label>Makeup Remover</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11059301','Makeup Sets','Beauty')">
                                                <label>Makeup Sets</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11060451','Skin Care','Beauty')">
                                                <label>Skin Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11060711','Face','Beauty')">
                                                <label>Face</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11061941','Eyes','Beauty')">
                                                <label>Eyes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11060521','Body','Beauty')">
                                                <label>Body</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3761351','Lip Care','Beauty')">
                                                <label>Lip Care</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11057241','Hair Care','Beauty')">
                                                <label>Hair Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11057651','Shampoo','Beauty')">
                                                <label>Shampoo</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11057251','Conditioner','Beauty')">
                                                <label>Conditioner</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11057841','Styling Products','Beauty')">
                                                <label>Styling Products</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11057451','Hair Coloring Products','Beauty')">
                                                <label>Hair Coloring Products</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('10666241011','Hair & Scalp Care','Beauty')">
                                                <label>Hair &amp; Scalp Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('10898755011','Hair Loss Products','Beauty')">
                                                <label>Hair Loss Products</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11057971','Hair Accessories','Beauty')">
                                                <label>Hair Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11058091','Styling Tools & Appliances','Beauty')">
                                                <label>Styling Tools &amp; Appliances</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11056591','Fragrance','Beauty')">
                                                <label>Fragrance</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11056761','Men's','Beauty')">
                                                <label>Men's</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11056931','Women's','Beauty')">
                                                <label>Women's</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11056711','Children's','Beauty')">
                                                <label>Children's</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('17242866011','Foot, Hand & Nail Care','Beauty')">
                                                <label>Foot, Hand &amp; Nail Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11062211','Foot & Hand Care','Beauty')">
                                                <label>Foot &amp; Hand Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11062291','Nail Care','Beauty')">
                                                <label>Nail Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11059311','Nail Art & Polish','Beauty')">
                                                <label>Nail Art &amp; Polish</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11063461','Tools & Accessories','Beauty')">
                                                <label>Tools &amp; Accessories</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('10079992011','Oral Care','Beauty')">
                                                <label>Oral Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3777911','Breath Fresheners','Beauty')">
                                                <label>Breath Fresheners</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13213837011','Children's Dental Care','Beauty')">
                                                <label>Children's Dental Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13213824011','Dental Floss & Picks','Beauty')">
                                                <label>Dental Floss &amp; Picks</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3778161','Mouthwash','Beauty')">
                                                <label>Mouthwash</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13213822011','Toothbrushes','Beauty')">
                                                <label>Toothbrushes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3777991','Tongue Cleaners','Beauty')">
                                                <label>Tongue Cleaners</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3778371','Toothpaste','Beauty')">
                                                <label>Toothpaste</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11062741','Tools & Accessories','Beauty')">
                                                <label>Tools &amp; Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11062751','Bags & Cases','Beauty')">
                                                <label>Bags &amp; Cases</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11056491','Bathing Accessories','Beauty')">
                                                <label>Bathing Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3784921','Cotton Balls & Swabs','Beauty')">
                                                <label>Cotton Balls &amp; Swabs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('10676449011','Hair Cutting Tools','Beauty')">
                                                <label>Hair Cutting Tools</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11058091','Hair Styling Tools & Appliances','Beauty')">
                                                <label>Hair Styling Tools &amp; Appliances</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11059391','Makeup Brushes & Tools','Beauty')">
                                                <label>Makeup Brushes &amp; Tools</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('15144566011','Salon & Spa Equipment','Beauty')">
                                                <label>Salon &amp; Spa Equipment</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13861652011','Skin Care Tools','Beauty')">
                                                <label>Skin Care Tools</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11063411','Mirrors & Magnifiers','Beauty')">
                                                <label>Mirrors &amp; Magnifiers</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3778591','Shave & Hair Removal','Beauty')">
                                                <label>Shave &amp; Hair Removal</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13271079011','Men&quot;s','Beauty')">
                                                <label>Men's</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13269990011','Women&quot;s','Beauty')">
                                                <label>Women's</label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Flyout details of 6th level node. -->                      
                                <div id="flyoutUSDetailDiv-Sports" class="flyoutDetailDiv text-left">
                                    <div class="col-md-6 ">
                                        <div class="col-md-12 text-center">
                                                <label>Sports, Fitness &amp; Outdoors</label>
                                            </div>
                                        <div class="col-md-6 box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('10971181011','Sports & Fitness','SportingGoods')">
                                                    <label>Sports &amp; Fitness</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3421331','Boating & Sailing','SportingGoods')">
                                                    <label>Boating &amp; Sailing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('11444071011','Clothing','SportingGoods')">
                                                    <label>Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3407731','Exercise & Fitness','SportingGoods')">
                                                    <label>Exercise &amp; Fitness</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3410851','Golf','SportingGoods')">
                                                    <label>Golf</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('706813011','Hunting & Fishing','SportingGoods')">
                                                    <label>Hunting &amp; Fishing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('706815011','Airsoft & Paintball','SportingGoods')">
                                                    <label>Airsoft &amp; Paintball</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('706808011','Leisure Sports & Game Room','SportingGoods')">
                                                    <label>Leisure Sports &amp; Game Room</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3416071','Running','SportingGoods')">
                                                    <label>Running</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3418761','Swimming','SportingGoods')">
                                                    <label>Swimming</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3422251','Yoga','SportingGoods')">
                                                    <label>Yoga</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('706809011','Team Sports','SportingGoods')">
                                                    <label>Team Sports</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('706816011','Tennis & Racquet Sports','SportingGoods')">
                                                    <label>Tennis &amp; Racquet Sports</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3394801','Accessories','SportingGoods')">
                                                    <label>Accessories</label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 bg-gray box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11443874011','Outdoor Clothing','SportingGoods')">
                                                    <label>Outdoor Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('11443875011','Men','SportingGoods')">
                                                    <label>Men</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('11443923011','Women','SportingGoods')">
                                                    <label>Women</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('11443976011','Boys','SportingGoods')">
                                                    <label>Boys</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('11444022011','Girls','SportingGoods')">
                                                    <label>Girls</label>
                                                </li>
                                                <li>
                                                    <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3400371','Camping & Hiking','SportingGoods')">
                                                    <label>Camping &amp; Hiking</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3402401','Climbing','SportingGoods')">
                                                    <label>Climbing</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403201','Cycling','SportingGoods')">
                                                    <label>Cycling</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11051398011','Skates, Skateboards & Scooters','SportingGoods')">
                                                    <label>Skates, Skateboards &amp; Scooters</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11051399011','Water Sports','SportingGoods')">
                                                    <label>Water Sports</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2204518011','Winter Sports','SportingGoods')">
                                                    <label>Winter Sports</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11051400011','Accessories','SportingGoods')">
                                                    <label>Accessories</label>
                                                </li>
                                            </ul>
                                        </div>   
                                    </div>
                                    <div class="col-md-6">
                                        <div class="col-md-12 text-center">
                                                <label>Fan Shops</label>
                                            </div>
                                        <div class="col-md-6 box"> 
                                            <ul class="flyoutNodeList">
                                                <li onclick="flyoutNodeClicked('374773011','Auto Accessories','SportingGoods')">
                                                    <label>Auto Accessories</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('5768574011','Bags, Packs & Accessories','SportingGoods')">
                                                    <label>Bags, Packs &amp; Accessories</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('5768995011','Caps & Hats','SportingGoods')">
                                                    <label>Caps &amp; Hats</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3209246011','Cell Phone Accessories','SportingGoods')">
                                                    <label>Cell Phone Accessories</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('374742011','Clothing','SportingGoods')">
                                                    <label>Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2311740011','Electronics','SportingGoods')">
                                                    <label>Electronics</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2431377011','Clothing Accessories','SportingGoods')">
                                                    <label>Clothing Accessories</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('374747011','Footwear','SportingGoods')">
                                                    <label>Footwear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('375518011','Gameday & Tailgating','SportingGoods')">
                                                    <label>Gameday &amp; Tailgating</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('5769001011','Golf Store','SportingGoods')">
                                                    <label>Golf Store</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('374916011','Jewelry & Watches','SportingGoods')">
                                                    <label>Jewelry &amp; Watches</label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 bg-gray box">
                                            <ul class="flyoutNodeList">
                                                <li onclick="flyoutNodeClicked('374819011','Home & Kitchen','SportingGoods')">
                                                    <label>Home &amp; Kitchen</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2309018011','Office Products','SportingGoods')">
                                                    <label>Office Products</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('374893011','Patio, Lawn & Garden','SportingGoods')">
                                                    <label>Patio, Lawn &amp; Garden</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('5769002011','Pet Gear','SportingGoods')">
                                                    <label>Pet Gear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3250697011','Sports Collectibles','SportingGoods')">
                                                    <label>Sports Collectibles</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('374927011','Sports Equipment','SportingGoods')">
                                                    <label>Sports Equipment</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('374783011','Sports Souvenirs','SportingGoods')">
                                                    <label>Sports Souvenirs</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('2309443011','Tools & Home Improvement','SportingGoods')">
                                                    <label>Tools &amp; Home Improvement</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('375519011','Toys & Game Room','SportingGoods')">
                                                    <label>Toys &amp; Game Room</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3209250011','Video Games & Accessories','SportingGoods')">
                                                    <label>Video Games &amp; Accessories</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>    
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div id="flyoutDivAmazonIN" class="col-md-12 text-center pagination-centered">
                                
                                <ul id="flyoutTopLevelList" class="list-inline float-flyout-IN">
                                    <li id="flyoutINNode-Women" class="flyout0Node selectedFlyout0Node" onmouseover="hoverFlyout0Node('flyoutINNode-Women','flyoutINDetailDiv-Women')">
                                        <label>Women</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutINNode-Men" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutINNode-Men','flyoutINDetailDiv-Men')">
                                        <label>Men</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutINNode-Kids" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutINNode-Kids','flyoutINDetailDiv-Kids')">
                                        <label>Kids &amp; Baby</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutINNode-Beauty" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutINNode-Beauty','flyoutINDetailDiv-Beauty')">
                                        <label>Beauty &amp; Personal Care</label>
                                        <span class="caret"></span>
                                    </li>
                                    <li id="flyoutINNode-Sports" class="flyout0Node" onmouseover="hoverFlyout0Node('flyoutINNode-Sports','flyoutINDetailDiv-Sports')">
                                        <label>Sports &amp; Fitness</label>
                                        <span class="caret"></span>
                                    </li>
                                </ul>                               

                                <div id="flyoutINDetailDiv-Women" class="flyoutDetailDiv selectedFlyoutDetailDiv text-left">
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('11400137031','Western Wear','Apparel')">
                                            <label>Western Wear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968542031','Tops, Tees & Shirts','Apparel')">
                                            <label>Tops, Tees &amp; Shirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968445031','Dresses','Apparel')">
                                            <label>Dresses</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968547031','Trousers','Apparel')">
                                            <label>Trousers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968447031','Jeans','Apparel')">
                                            <label>Jeans</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968456031','Leggings','Apparel')">
                                            <label>Leggings</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968511031','Skirts','Apparel')">
                                            <label>Skirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968510031','Shorts','Apparel')">
                                            <label>Shorts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968505031','Coats & Jackets','Apparel')">
                                            <label>Coats &amp; Jackets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968449031','Sweaters','Apparel')">
                                            <label>Sweaters</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968526031','Suiting & Blazers','Apparel')">
                                            <label>Suiting &amp; Blazers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11400133031','Sweatshirts & Hoodies','Apparel')">
                                            <label>Sweatshirts &amp; Hoodies</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968517031','Socks & Hosiery','Apparel')">
                                            <label>Socks &amp; Hosiery</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968253031','Ethnic Wear','Apparel')">
                                            <label>Ethnic Wear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968256031','Sarees','Apparel')">
                                            <label>Sarees</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968255031','Kurtas','Apparel')">
                                            <label>Kurtas</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3723380031','Salwar Suit Sets','Apparel')">
                                            <label>Salwar Suit Sets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3723378031','Lehenga Cholis','Apparel')">
                                            <label>Lehenga Cholis</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968428031','Sportswear','Apparel')">
                                            <label>Sportswear</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1953294031','Maternity','Apparel')">
                                            <label>Maternity</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968533031','Swim','Apparel')">
                                            <label>Swim</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968512031','Raincoats','Apparel')">
                                            <label>Raincoats</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968391031','Accessories','Apparel')">
                                            <label>Accessories</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968457031','Lingerie & Underwear','Apparel')">
                                            <label>Lingerie &amp; Underwear</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968498031','Nightwear','Apparel')">
                                            <label>Nightwear</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1983578031','Shoes','Shoes')">
                                            <label>Footwear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983629031','Boots','Shoes')">
                                            <label>Boots</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9780815031','Casual Shoes','Shoes')">
                                            <label>Casual Shoes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('4068645031','Ethnic Footwear','Shoes')">
                                            <label>Ethnic Footwear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983633031','Fashion Sandals','Shoes')">
                                            <label>Fashion Sandals</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983639031','Fashion Slippers','Shoes')">
                                            <label>Fashion Slippers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983638031','Flip-Flops & House Slippers','Shoes')">
                                            <label>Flip-Flops &amp; House Slippers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983631031','Pumps','Shoes')">
                                            <label>Pumps</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983582031','Floaters & Sports Sandals','Shoes')">
                                            <label>Floaters &amp; Sports Sandals</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983634031','Formal Shoes','Shoes')">
                                            <label>Formal Shoes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983579031','Sport Shoes','Shoes')">
                                            <label>Sport Shoes</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1983320031','Shoe Care & Accessories','Shoes')">
                                            <label>Shoe Care &amp; Accessories</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2563505031','Watches','Watches')">
                                            <label>Watches</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968401031','Sunglasses','Apparel')">
                                            <label>Sunglasses</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7124358031','Jewelry','Jewelry')">
                                            <label>Jewelry</label>
                                            </li>
                                            <li>
                                                <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1983338031','Handbags & Clutches','Apparel')">
                                            <label>Handbags &amp; Clutches</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983350031','Clutches','Apparel')">
                                            <label>Clutches</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983355031','Handbags','Apparel')">
                                            <label>Handbags</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983351031','Sling & Cross-Body Bags','Apparel')">
                                            <label>Sling &amp; Cross-Body Bags</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983356031','Totes','Apparel')">
                                            <label>Totes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2917497031','Wallets','Apparel')">
                                            <label>Wallets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2917442031','Messenger Bags','Apparel')">
                                            <label>Messenger Bags</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('','Satchels','Apparel')">
                                            <label>Satchels</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983347031','Backpack Handbags','Apparel')">
                                            <label>Backpack Handbags</label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div id="flyoutINDetailDiv-Men" class="flyoutDetailDiv text-left">
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode">
                                            <label>Top Wear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968123031','T-Shirts','Apparel')">
                                            <label>T-Shirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968122031','Polos','Apparel')">
                                            <label>Polos</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968094031','Casual Shirts','Apparel')">
                                            <label>Casual Shirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968096031','Formal Shirts','Apparel')">
                                            <label>Formal Shirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968088031','Jackets','Apparel')">
                                            <label>Jackets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11960414031','Sweatshirts & Hoodies','Apparel')">
                                            <label>Sweatshirts &amp; Hoodies</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968077031','Sweaters','Apparel')">
                                            <label>Sweaters</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode">
                                            <label>Bottom Wear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968076031','Jeans','Apparel')">
                                            <label>Jeans</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968097031','Shorts','Apparel')">
                                            <label>Shorts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('5836982031','Formal Trousers','Apparel')">
                                            <label>Formal Trousers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('5836983031','Casual Trousers','Apparel')">
                                            <label>Casual Trousers</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968248031','Ethnic Wear','Apparel')">
                                            <label>Ethnic Wear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('5229862031','Ethnic Jackets','Apparel')">
                                            <label>Ethnic Jackets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3723382031','Kurta Pyjamas','Apparel')">
                                            <label>Kurta Pyjamas</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968250031','Kurtas','Apparel')">
                                            <label>Kurtas</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968251031','Sherwanis','Apparel')">
                                            <label>Sherwanis</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3723383031','Bottoms','Apparel')">
                                            <label>Bottoms</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968249031','Dhotis, Mundus & Lungis','Apparel')">
                                            <label>Dhotis, Mundus &amp; Lungis</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968082031','Sleep & Lounge Wear','Apparel')">
                                            <label>Sleep &amp; Lounge Wear</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968126031','Innerwear','Apparel')">
                                            <label>Innerwear</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968103031','Socks','Apparel')">
                                            <label>Socks</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968098031','Rainwear','Apparel')">
                                            <label>Rainwear</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968025031','Accessories','Apparel')">
                                            <label>Accessories</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968117031','Swim','Apparel')">
                                            <label>Swim</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968062031','Sportswear','Apparel')">
                                            <label>Sportswear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3404668031','Gloves','Apparel')">
                                            <label>Gloves</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968068031','Shorts','Apparel')">
                                            <label>Shorts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968067031','Sports T-Shirts','Apparel')">
                                            <label>Sports T-Shirts</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('11960414031','Sweatshirts & Hoodies','Apparel')">
                                            <label>Sweatshirts &amp; Hoodies</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968074031','Track Jackets','Apparel')">
                                            <label>Track Jackets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968071031','Track Pants','Apparel')">
                                            <label>Track Pants</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1968070031','Tracksuits','Apparel')">
                                            <label>Tracksuits</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968036031','Sunglasses','Apparel')">
                                            <label>Sunglasses</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2563504031','Watches','Watches')">
                                            <label>Watches</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7124359031','Jewelry','Jewelry')">
                                            <label>Jewelry</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968027031','Belts & Suspenders','Apparel')">
                                            <label>Belts &amp; Suspenders</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1968039031','Hats & Caps','Apparel')">
                                            <label>Hats &amp; Caps</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1983518031','Shoes','Shoes')">
                                            <label>Footwear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983568031','Boots','Shoes')">
                                            <label>Boots</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983569031','Clogs','Shoes')">
                                            <label>Clogs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9780814031','Casual Shoes','Shoes')">
                                            <label>Casual Shoes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983575031','Flip-Flops & House Slippers','Shoes')">
                                            <label>Flip-Flops &amp; House Slippers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983572031','Formal Shoes','Shoes')">
                                            <label>Formal Shoes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983571031','Sandals & Floaters','Shoes')">
                                            <label>Sandals &amp; Floaters</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983519031','Sport Shoes','Shoes')">
                                            <label>Sport Shoes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983576031','Thong Sandals','Shoes')">
                                            <label>Thong Sandals</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983574031','Safety Shoes','Shoes')">
                                            <label>Safety Shoes</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1983320031','Shoe Care & Accessories','Shoes')">
                                            <label>Shoe Care &amp; Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983331031','Shoe Care Kits','Shoes')">
                                            <label>Shoe Care Kits</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983336031','Shoe Treatments & Polishes','Shoes')">
                                            <label>Shoe Treatments &amp; Polishes</label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Flyout details of 3rd level node. -->
                                <div id="flyoutINDetailDiv-Kids" class="flyoutDetailDiv text-left">
                                    <div class="col-md-6">
                                        <div class="col-md-12 text-center">
                                            <label>Girls</label>
                                        </div>   
                                        <div class="col-md-6 box">    
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1967936031','Clothing','Apparel')">
                                                <label>Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967972031','Dresses','Apparel')">
                                                <label>Dresses</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3659020031','Ethnic Wear','Apparel')">
                                                <label>Ethnic Wear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1968010031','Tops & Tees','Apparel')">
                                                <label>Tops &amp; Tees</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967998031','Socks, Tights & Leggings','Apparel')">
                                                <label>Socks, Tights &amp; Leggings</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967985031','Skirts & Skorts','Apparel')">
                                                <label>Skirts &amp; Skorts</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967974031','Jeans','Apparel')">
                                                <label>Jeans</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967936031','Clothing Sets','Apparel')">
                                                <label>Clothing Sets</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967975031','Sweaters','Apparel')">
                                                <label>Sweaters</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1968005031','Swim','Apparel')">
                                                <label>Swim</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967986031','Sleepwear & Robes','Apparel')">
                                                <label>Sleepwear &amp; Robes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967955031','Sportswear','Apparel')">
                                                <label>Sportswear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1968016031','Underwear','Apparel')">
                                                <label>Underwear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967983031','Jumpsuits','Apparel')">
                                                <label>Jumpsuits</label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 bg-gray box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7124361031','Jewelry','Jewlery')">
                                                <label>Jewelry</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('5518819031','Watches','Watches')">
                                                <label>Watches</label>
                                                </li>
                                                <li>
                                                <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1983456031','Footwear','Shoes')">
                                                <label>Footwear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983505031','Ballet Flats','Shoes')">
                                                <label>Ballet Flats</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('9780816031','Casual Shoes','Shoes')">
                                                <label>Casual Shoes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983508031','Clogs','Shoes')">
                                                <label>Clogs</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983511031','Fashion Sandals','Shoes')">
                                                <label>Fashion Sandals</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983516031','Fashion Slippers','Shoes')">
                                                <label>Fashion Slippers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983515031','Flip-Flops & House Slippers','Shoes')">
                                                <label>Flip-Flops &amp; House Slippers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983512031','Formal Shoes','Shoes')">
                                                <label>Formal Shoes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983457031','Sport Shoes','Shoes')">
                                                <label>Sport Shoes</label>
                                                </li>
                                                <li>
                                                <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1953210031','Baby Girls 0-24 months','Apparel')">
                                                <label>Baby Girls 0-24 months</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div> 
                                    <div class="col-md-6">
                                        <div class="col-md-12 text-center">
                                            <label>Boys</label>
                                        </div>
                                        <div class="col-md-6 box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1967851031','Clothing','Apparel')">
                                                <label>Clothing</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967922031','Tops & Tees','Apparel')">
                                                <label>Tops &amp; Tees</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967895031','Shirts','Apparel')">
                                                <label>Shirts</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('3659021031','Ethnic Wear','Apparel')">
                                                <label>Ethnic Wear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967896031','Shorts','Apparel')">
                                                <label>Shorts</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967927031','Trousers','Apparel')">
                                                <label>Trousers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967887031','Jeans','Apparel')">
                                                <label>Jeans</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967928031','Underwear','Apparel')">
                                                <label>Underwear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('11400135031','Sweatshirts & Hoodies','Apparel')">
                                                <label>Sweatshirts &amp; Hoodies</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967908031','Socks','Apparel')">
                                                <label>Socks</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('5865997031','Sweaters','Apparel')">
                                                <label>Sweaters</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967873031','Sportswear','Apparel')">
                                                <label>Sportswear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967897031','Sleepwear & Robes','Apparel')">
                                                <label>Sleepwear &amp; Robes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1967893031','Clothing Sets','Apparel')">
                                                <label>Clothing Sets</label>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6 bg-gray box">
                                            <ul class="flyoutNodeList">
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('2563506031','Watches','Watches')">
                                                <label>Watches</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1967858031','Sunglasses','Apparel')">
                                                <label>Sunglasses</label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('7124360031','Jewelry','Jewelry')">
                                                <label>Jewelry</label>
                                                </li>
                                                <li>
                                                <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1983397031','Footwear','Shoes')">
                                                <label>Footwear</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('9780817031','Casual Shoes','Shoes')">
                                                <label>Casual Shoes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983448031','Clogs','Shoes')">
                                                <label>Clogs</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983453031','Flip-Flops & House Slippers','Shoes')">
                                                <label>Flip-Flops &amp; House Slippers</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983451031','Formal Shoes','Shoes')">
                                                <label>Formal Shoes</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983450031','Sandals & Floaters','Shoes')">
                                                <label>Sandals &amp; Floaters</label>
                                                </li>
                                                <li onclick="flyoutNodeClicked('1983398031','Sport Shoes','Shoes')">
                                                <label>Sport Shoes</label>
                                                </li>
                                                <li>
                                                <label></label>
                                                </li>
                                                <li>
                                                <label></label>
                                                </li>
                                                <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1953149031','Baby Boys 0-24 months','Apparel')">
                                                <label>Baby Boys 0-24 months</label>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>                         
                                <!-- Flyout details of 4th level node. -->                        
                                <div id="flyoutINDetailDiv-Beauty" class="flyoutDetailDiv text-left">
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1374276031','Bath & Body','Beauty')">
                                            <label>Bath &amp; Body</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374277031','Bath Additives','Beauty')">
                                            <label>Bath Additives</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374284031','Bathing Accessories','Beauty')">
                                            <label>Bathing Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374297031','Bath Sets & Kits','Beauty')">
                                            <label>Bath Sets &amp; Kits</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374296031','Body Scrubs','Beauty')">
                                            <label>Body Scrubs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374292031','Body Washes','Beauty')">
                                            <label>Body Washes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374596031','Deodorants & Antiperspirants','Beauty')">
                                            <label>Deodorants &amp; Antiperspirants</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374295031','Soaps','Beauty')">
                                            <label>Soaps</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1374298031','Fragrance','Beauty')">
                                            <label>Fragrance</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374596031','Deodrants & Roll-ons','Beauty')">
                                            <label>Deodrants &amp; Roll-ons</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374301031','Eau de Toilette','Beauty')">
                                            <label>Eau de Toilette</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374300031','Eau de Parfum','Beauty')">
                                            <label>Eau de Parfum</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374299031','Eau de Cologne','Beauty')">
                                            <label>Eau de Cologne</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374304031','Sets','Beauty')">
                                            <label>Sets</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9851607031','Body Sprays & Mists','Beauty')">
                                            <label>Body Sprays &amp; Mists</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1374357031','Make-up & Nails','Beauty')">
                                            <label>Make-up &amp; Nails</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374364031','Eyes','Beauty')">
                                            <label>Eyes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374379031','Lips','Beauty')">
                                            <label>Lips</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374371031','Face','Beauty')">
                                            <label>Face</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374358031','Body','Beauty')">
                                            <label>Body</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374389031','Nails','Beauty')">
                                            <label>Nails</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374387031','Make-up Remover','Beauty')">
                                            <label>Make-up Remover</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9530409031','Make-up Sets and Kits','Beauty')">
                                            <label>Make-up Sets and Kits</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1374407031','Skin Care','Beauty')">
                                            <label>Skin Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374414031','Face','Beauty')">
                                            <label>Face</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374408031','Body','Beauty')">
                                            <label>Body</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374438031','Lips','Beauty')">
                                            <label>Lips</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374413031','Eyes','Beauty')">
                                            <label>Eyes</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374431031','Hands','Beauty')">
                                            <label>Hands</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374611031','Feet','Beauty')">
                                            <label>Feet</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('9851597031','Hair Care','Beauty')">
                                            <label>Hair Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374334031','Shampoos','Beauty')">
                                            <label>Shampoos</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374306031','Conditioners','Beauty')">
                                            <label>Conditioners</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3507139031','Hair Oils','Beauty')">
                                            <label>Hair Oils</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374307031','Hair & Scalp Treatments','Beauty')">
                                            <label>Hair &amp; Scalp Treatments</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9851599031','Hair Masks & Packs','Beauty')">
                                            <label>Hair Masks &amp; Packs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374342031','Hair Serums','Beauty')">
                                            <label>Hair Serums</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9851598031','Hair Creams','Beauty')">
                                            <label>Hair Creams</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374315031','Hennas','Beauty')">
                                            <label>Hennas</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1374336031','Styling','Beauty')">
                                            <label>Styling</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374309031','Hair Color','Beauty')">
                                            <label>Hair Color</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374338031','Creams, Gels & Lotions','Beauty')">
                                            <label>Creams, Gels &aacute; Lotions</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374341031','Hair Sprays & Mists','Beauty')">
                                            <label>Hair Sprays &amp; Mists</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374343031','Mousses','Beauty')">
                                            <label>Mousses</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('9851602031','Clays','Beauty')">
                                            <label>Clays</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1374450031','Tools & Accessories','Beauty')">
                                            <label>Tools &amp; Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374284031','Bathing Accessories','Beauty')">
                                            <label>Bathing Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374451031','Bags & Cases','Beauty')">
                                            <label>Bags &amp; Cases</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374457031','Cotton & Swabs','Beauty')">
                                            <label>Cotton &amp; Swabs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374611031','Foot Care','Beauty')">
                                            <label>Foot Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('10850754031','Hair Combs, Wigs & Accessories','Beauty')">
                                            <label>Hair Combs, Wigs &amp; Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374345031','Hair Styling Tools','Beauty')">
                                            <label>Hair Styling Tools</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374467031','Make-up Brushes & Tools','Beauty')">
                                            <label>Make-up Brushes &amp; Tools</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374468031','Mirrors','Beauty')">
                                            <label>Mirrors</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374471031','Nail Tools','Beauty')">
                                            <label>Nail Tools</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('10858455031','Shaving & Hair Removal','Beauty')">
                                            <label>Shaving &amp; Hair Removal</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374654031','Trimmers & Clippers','Beauty')">
                                            <label>Trimmers &amp; Clippers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374647031','Electric Shavers','Beauty')">
                                            <label>Electric Shavers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1374645031','Epilators','Beauty')">
                                            <label>Epilators</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('4264046031','Manual Razors','Beauty')">
                                            <label>Manual Razors</label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Flyout details of 5th level node. -->                       
                                <div id="flyoutINDetailDiv-Sports" class="flyoutDetailDiv text-left">
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode">
                                            <label>Sports</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403619031','Badminton','SportingGoods')">
                                            <label>Badminton</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403621031','Basketball','SportingGoods')">
                                            <label>Basketball</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403624031','Boxing','SportingGoods')">
                                            <label>Boxing</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403629031','Cycling','SportingGoods')">
                                            <label>Cycling</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403628031','Cricket','SportingGoods')">
                                            <label>Cricket</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403627031','Climbing','SportingGoods')">
                                            <label>Climbing</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403632031','Disc Sports','SportingGoods')">
                                            <label>Disc Sports</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403631031','Darts & Dartboards','SportingGoods')">
                                            <label>Darts &amp; Dartboards</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403640031','Football','SportingGoods')">
                                            <label>Football</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403644031','Golf','SportingGoods')">
                                            <label>Golf</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403659031','Running','SportingGoods')">
                                            <label>Running</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('13831602031','Skates, Skateboards & Scooters','SportingGoods')">
                                            <label>Skates, Skateboards &amp; Scooters</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403668031','Table Tennis','SportingGoods')">
                                            <label>Table Tennis</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403670031','Tennis','SportingGoods')">
                                            <label>Tennis</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403674031','Volleyball','SportingGoods')">
                                            <label>Volleyball</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403675031','Water Sports','SportingGoods')">
                                            <label>Water Sports</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('1984988031','Camping & Hiking','SportingGoods')">
                                            <label>Camping &amp; Hiking</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403811031','Bags & Packs','SportingGoods')">
                                            <label>Bags &amp; Packs</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1984995031','Hiking Daypacks','SportingGoods')">
                                            <label>Hiking Daypacks</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403813031','Camp Kitchen','SportingGoods')">
                                            <label>Camp Kitchen</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403814031','Camping Furniture','SportingGoods')">
                                            <label>Camping Furniture</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403815031','Camping Shelters','SportingGoods')">
                                            <label>Camping Shelters</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403816031','Clothing','SportingGoods')">
                                            <label>Clothing</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403817031','Footwear','SportingGoods')">
                                            <label>Footwear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403819031','Hand & Foot Warmers','SportingGoods')">
                                            <label>Hand &amp; Foot Warmers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403821031','Knives & Tools','SportingGoods')">
                                            <label>Knives &amp; Tools</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403822031','Lighters & Fire Starters','SportingGoods')">
                                            <label>Lighters &amp; Fire Starters</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403823031','Lights & Lanterns','SportingGoods')">
                                            <label>Lights &amp; Lanterns</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403824031','Personal Care','SportingGoods')">
                                            <label>Personal Care</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403825031','Safety & Survival Gear','SportingGoods')">
                                            <label>Safety &amp; Survival Gear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403826031','Sleeping Gear','SportingGoods')">
                                            <label>Sleeping Gear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403827031','Tent Accessories','SportingGoods')">
                                            <label>Tent Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403828031','Tents','SportingGoods')">
                                            <label>Tents</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403635031','Exercise & Fitness','SportingGoods')">
                                            <label>Exercise &amp; Fitness</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403925031','Accessories','SportingGoods')">
                                            <label>Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403926031','Aerobic Training Machines','SportingGoods')">
                                            <label>Aerobic Training Machines</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403927031','Balance Trainers','SportingGoods')">
                                            <label>Balance Trainers</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403928031','Clothing','SportingGoods')">
                                            <label>Clothing</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403931031','Footwear','SportingGoods')">
                                            <label>Footwear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('2917502031','Gym Bags','SportingGoods')">
                                            <label>Gym Bags</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403932031','Pilates','SportingGoods')">
                                            <label>Pilates</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403933031','Strength Training Equipment','SportingGoods')">
                                            <label>Strength Training Equipment</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403935031','Yoga','SportingGoods')">
                                            <label>Yoga</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403641031','Footwear','SportingGoods')">
                                            <label>Footwear</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403990031','Athletic Shoes Accessories','SportingGoods')">
                                            <label>Athletic Shoes Accessories</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983398031','Boys','SportingGoods')">
                                            <label>Boys</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983457031','Girls','SportingGoods')">
                                            <label>Girls</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983579031','Women','SportingGoods')">
                                            <label>Women</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('1983519031','Men','SportingGoods')">
                                            <label>Men</label>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="col-md-3 bg-gray box">
                                        <ul class="flyoutNodeList">
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403666031','Clothing','SportingGoods')">
                                            <label>Clothing</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403816031','Camping & Hiking','SportingGoods')">
                                            <label>Camping &amp; Hiking</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403859031','Cricket','SportingGoods')">
                                            <label>Cricket</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403871031','Cycling','SportingGoods')">
                                            <label>Cycling</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403928031','Exercise & Fitness','SportingGoods')">
                                            <label>Exercise &amp; Fitness</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3404740031','Yoga & Pilates Clothing','SportingGoods')">
                                            <label>Yoga &amp; Pilates Clothing</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3403981031','Football','SportingGoods')">
                                            <label>Football</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3404124031','Running','SportingGoods')">
                                            <label>Running</label>
                                            </li>
                                            <li onclick="flyoutNodeClicked('3404190031','Tennis','SportingGoods')">
                                            <label>Tennis</label>
                                            </li>
                                            <li>
                                            <label></label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403633031','Sports Gadgets','SportingGoods')">
                                            <label>Sports Gadgets</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403899031','Compasses','SportingGoods')">
                                            <label>Compasses</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('4730577031','Activity Trackers','SportingGoods')">
                                            <label>Activity Trackers</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403903031','Action Cameras & Accessories','SportingGoods')">
                                            <label>Action Cameras &amp; Accessories</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403901031','GPS Units','SportingGoods')">
                                            <label>GPS Units</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3404126031','Heart Rate Monitors','SportingGoods')">
                                            <label>Heart Rate Monitors</label>
                                            </li>
                                            <li class="flyoutSubHeadNode" onclick="flyoutNodeClicked('3403905031','Pedometers','SportingGoods')">
                                            <label>Pedometers</label>
                                            </li>
                                        </ul>
                                    </div>                                
                                </div>
                            </div>
                        </div>
                    </div>

            <div id="fourBannersArea" style="display:none">
                <div style="text-align: center; background-color:white;" class="row">
                    <hr style="border-top: 1px solid #8c8b8b; width:90%;">
                    <div class="col-md-4">
                    </div>
                    <div class="col-md-4" style="background-color: #ffffff; vertical-align: middle;">
                        <h3 style="vertical-align: middle; color:#3f4a68">Need some suggestions?</h3>
                    </div>
                    <div class="col-md-4">
                    </div>
                </div>

                <!-- The four banner categories -->
                <div style="text-align: center; background-color:white; padding-bottom: 30px" class="row">
                    
                    <div class="col-md-3">
                        <div style="background-color:white; padding-bottom: 5px">
                            <a class="btn" onclick="catPickHandler('Apparel')">
                                <h4 >Clothing &amp; Accessories</h4>
                                <img width="60%" height="auto" src="categoryIcons/71BzGQ2RwmL._UL1500_.jpg">
                            </a>
                            <ul class="catList">
                              <li class="topCat"><a class="btn" onclick="catPickHandler('ApparelWomen')">Women</a></li>
                              <li><a class="btn" onclick="catPickHandler('ApparelMen')">Men</a></li>
                              <li><a class="btn" onclick="catPickHandler('ApparelGirls')">Girls</a></li>
                              <li><a class="btn" onclick="catPickHandler('ApparelBoys')">Boys</a></li>
                              <li><a class="btn" onclick="catPickHandler('ApparelBaby')">Baby</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div style="background-color:white; padding-bottom: 5px">
                            <a class="btn" onclick="catPickHandler('Shoes')">
                                <h4>Shoes &amp; Handbags</h4>
                                <img width="60%" height="auto" src="categoryIcons/shoes.jpg">
                            </a>
                            <ul class="catList">
                              <li class="topCat"><a class="btn" onclick="catPickHandler('ShoesWomenSandals')">Women's Sandals</a></li>
                              <li><a class="btn" onclick="catPickHandler('ShoesWomenCasual')">Women's Casual Shoes</a></li>
                              <li><a class="btn" onclick="catPickHandler('ShoesHandbags')">Handbags &amp; Clutches</a></li>
                              <li><a class="btn" onclick="catPickHandler('ShoesMenCasual')">Men's Casual Shoes</a></li>
                              <li><a class="btn" onclick="catPickHandler('ShoesMenFormal')">Men's Formal Shoes</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div style="background-color:white; padding-bottom: 5px">
                            <a class="btn" onclick="catPickHandler('Beauty')">
                                <h4>Beauty</h4>
                                <img width="60%" height="auto" src="categoryIcons/61cuWcp0cHL._SL1024_.jpg">
                            </a>
                            <ul class="catList">
                              <li class="topCat"><a class="btn" onclick="catPickHandler('BeautyBath')">Bath &amp; Body</a></li>
                              <li><a class="btn" onclick="catPickHandler('BeautyFragrance')">Fragrance</a></li>
                              <li><a class="btn" onclick="catPickHandler('BeautyHair')">Hair Care &amp; Styling</a></li>
                              <li><a class="btn" onclick="catPickHandler('BeautyNails')">Makeup &amp; Nails</a></li>
                              <li><a class="btn" onclick="catPickHandler('BeautySkin')">Skin Care</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div style="background-color:white; padding-bottom: 5px">
                            <a class="btn" onclick="catPickHandler('SportingGoods')">
                                <h4>Sports, Fitness &amp; Outdoor</h4>
                                <img width="60%" height="auto" src="categoryIcons/sports.jpg">
                            </a>
                            <ul class="catList">
                              <li class="topCat"><a class="btn" onclick="catPickHandler('SportingGoodsExercise')">Exercise &amp; Fitness</a></li>
                              <li><a class="btn" onclick="catPickHandler('SportingGoodsCamping')">Camping &amp; Hiking</a></li>
                              <li><a class="btn" onclick="catPickHandler('SportingGoodsClothing')">Sports Clothing</a></li>
                              <li><a class="btn" onclick="catPickHandler('SportingGoodsRunning')">Running</a></li>
                              <li><a class="btn" onclick="catPickHandler('SportingGoodsClimbing')">Climbing</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="background-color:white;width:100%">
            <br/>
            </div>
            
        </div>
        <!-- Main product search and detail div -->
        <div class="col-md-12" id="storeArea" style="display:none;">
            <!-- Tab selector (between shared and own) -->
            
            <!-- Search and Search Results with filters -->
            <div class="row" id="searchResultsArea">
                <!-- Left pane for search filters -->
                <div class="col-md-2" id="filterArea">
                    <div>
                    <button type="button" 
                            data-toggle="collapse" 
                            data-target="#filters" 
                            class="visible-xs visible-sm collapsed btn btn-primary"
                            style="width:100%">Filters</button>
                    </div>
                    <div id="filters" class="collapse">
                        <h4 style="margin-top:20px">Show results for</h4>
                        <ul id="browseNodeList" class="ancestorList">
                            
                        </ul>
                        <hr>
                        <h4 style="margin-top:20px">Refine by</h4>
                        
                        <ul class="priceList">
                            <li class="priceHeading">
                                <a class="btn disabled">Price</a>
                            </li>
                            <ul id="priceFilters-IN">
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'0',maxPrice:'500'});">Under ₹500</a>        
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'500',maxPrice:'1000'});">₹500 - ₹1,000</a>
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'1000',maxPrice:'2500'});">₹1,000 - ₹2,500</a>
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'2500',maxPrice:'5000'});">₹2,500 - ₹5,000</a>
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'5000',maxPrice:''});">Over ₹5000</a>
                                </li>
                            </ul>
                            <ul id="priceFilters-US">
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'0',maxPrice:'50'});">Under $50</a>        
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'50',maxPrice:'100'});">$50 - $100</a>
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'100',maxPrice:'250'});">$100 - $200</a>
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'250',maxPrice:'500'});">$250 - $500</a>
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'price',minPrice:'500',maxPrice:''});">Over $500</a>
                                </li>
                            </ul>
                        </ul>
                        <div style="float:left; margin-top:10px; margin-bottom:10px;">
                            <input type="text" id="minPrice" class="minMaxPriceInput" placeholder="Min"/>
                            <input type="text" id="maxPrice" class="minMaxPriceInput" placeholder="Max"/>
                        </div>
                        <ul id="brandList" class="brandList">
                            <li class="brandHeading">
                                <a class="btn disabled">Brand</a>
                            </li>
                            <ul id="brandChildList">
                                
                            </ul>
                        </ul>
                        
                        <button type="button" 
                                id="applyFilters Button" 
                                class="btn btn-primary"
                                style="margin-top:10px"
                                onclick="applyFiltersClicked();">Filter Results</button>

                        <ul class="priceList">
                            <li class="priceHeading">
                                <a class="btn disabled">Discount</a>
                            </li>
                            <ul>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'discount',discount:'10'});">10% Off or more</a>        
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'discount',discount:'25'});">25% Off or more</a>        
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'discount',discount:'35'});">35% Off or more</a>        
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'discount',discount:'50'});">50% Off or more</a>        
                                </li>
                                <li class="priceChildList">
                                    <a onclick="applyFiltersClicked({filterBy:'discount',discount:'75'});">75% Off or more</a>        
                                </li>
                            </ul>
                        </ul>
                        <hr/>
                        

                    </div>
                </div>
                <!-- Right pane for search results -->
                <div class="col-md-10" id="productArea">
                    <div class="row" id="searchResults">
                    </div>
                    <div id="moreResultsButtonDiv" style="margin:0px -15px 0px -15px;">
                        <button id="moreResultsButton" class="btn btn-primary" onclick="moreResults();" style="width:100%; margin: 0px;">More Results</button>
                    </div>
                </div>
            </div>
            <!-- Item Detail Page -->
            <div class="row" id="itemDetails" style="display: none">
                <div class="row" style="max-width:300px">
                    <div style="padding-left: 25px; padding-top: 10px;">
                        <button type="button" class="btn btn-primary" onclick="viewController('searchResults');broadcastSharedTab();">Back to Search Results</button>
                    </div>
                </div>
                <div id="itemTopDiv" class="row">
                    <div id="itemLeft" class="col-md-5">
                        <div id="itemAltImgsDiv">
                            <ul id="itemAltImgsUL">
                            </ul>
                        </div>
                        <div id="itemMainImgContainer">
                            <div id="itemMainImgDiv">
                            </div>
                        </div>
                    </div>
                    <div id="itemCenter" class="col-md-5">
                        <div id="itemCenterTitle">
                        </div>
                        <div id="aboveTitleHR" class="itemCenter13pxTextDiv"> 
                        </div>
                        <hr style="margin-top:0px">
                        <div id="priceAndOffers" class="itemCenter13pxTextDiv">
                            <div id="listPrice">
                                <div class="priceLeft">
                                    M.R.P:
                                </div>
                                <div class="priceRight" id="listPriceDiv">                                   
                                </div>
                            </div>
                            <div id="offerPrice">
                                <div class="priceLeft">
                                    Price:
                                </div>
                                <div class="priceRight" id="offerPriceDiv">                                   
                                </div>
                            </div>
                            <div id="amznfulfilled">
                                <div class="priceLeft">
                                </div>
                                <div class="priceRight">
                                    <img src="/amazonFulfilled.png">
                                </div>
                            </div>
                            <div id="amountSaved">
                                <div class="priceLeft">
                                    You Save:
                                </div>
                                <div class="priceRight" id="amountSavedDiv">
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="itemCenter13pxTextDiv" id="itemMerchantDiv">
                            
                        </div>
                        <br>
                        <ul class="itemCenter13pxTextDiv" id="itemFeatureUL">
                        </ul>
                        <br>
                        <div id="dimSelectorText">
                            <div id="dimSelectorTextName" class="dimSelectorTextLeft">
                            </div>
                            <div id="dimSelectorTextValue" class="dimSelectorTextRight">
                            </div>
                        </div>
                        <ul id="dimSelectorList">
                            
                        </ul>
                        <br>
                        <div id="dimDropDownText">
                            <div id="dimDropDownTextName" class="dimSelectorTextLeft">
                            </div>
                            <div id="dimDropDownTextValue" class="dimSelectorTextRight">
                                <select id="dimDropDownList" onchange="setVariationItemByASIN();" style="min-width:120px;">
                                </select>
                            </div>
                        </div>
                        
                    </div>
                    <vr>
                    <div id="itemRight" class="col-md-2">
                        <div id="addToCartMainDiv">
                            <div id="addQuantityDiv">
                                <div id="addQuantityDropDownDiv">
                                
                                Quantity:
                                
                                <select id="quantityDropDown">
                                    
                                </select>
                                </div>
                            </div>
                            <div id="addToCartButtonDiv">
                                <button id="addToCartButton" type="button" class="btn btn-primary" onclick="addToCartClicked();" >
                                    <img id="addToCartImage" src="/cartWhite2000.png" />
                                Add to Cart </button>
                            </div>
                            <div id="itemUnavailableTextDiv" style="text-align:center;color:red">
                                <br>
                                Item Currently Unavailable
                            </div>
                            <hr>

                            <div id="addToCartAvailabilityDiv">
                                <div id="addToCartAvailabilityTextDiv">
                                </div>
                                <div id="addToCartPrimeDiv">
                                    <img src="/prime-check-badge-14._CB138348888_.png"/>
                                </div>
                                <div id="addToCartSuperSaverDiv">
                                    <img src="/amazonFulfilled.png"/>
                                </div>
                            </div>

                            <hr>

                            <div id="addToCartInfoDiv">
                                <a target="_blank" href="https://www.amazon.in/gp/help/customer/display.html?nodeId=202084980">Standard Shipping Speeds and Charges</a>
                            </div>

                            <hr>

                            <div id="shareItemDiv">
                                <button id="shareItemButton" type="button" class="btn btn-primary" onclick="sendMessageSharedItem();" >
                                Suggest this item </button>
                            </div>

                            <hr>

                            <div id="wishlistDiv-viewitem">
                              <div class="form-group">
                                <label for="wishlistDropdown-viewitem">Select wishlist:</label>
                                <select class="form-control" id="wishlistDropdown-viewitem" onchange="wishlistDropdownChangedViewItem();">
                                </select>
                                <input id="wishlistNameInput-viewitem" type="text" class="form-control" placeholder="Enter Name (Required)"/>
                                <div class="alert success" id="wishlistAddedSuccessMessage-viewitem" style="display: none">
                                  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
                                  Item added to wishlist.
                                </div>
                                <div class="alert warning" id="wishlistAddedFailMessage-viewitem" style="display: none">
                                  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
                                  Failed to add.
                                </div>
                                <button id="wishlistAddButton-viewitem" type="button" class="btn btn-primary" onclick="wishListItemAddClickedViewItem();">Add to Wishlist</button>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="itemHR">
                <div id="itemBottomDiv" class="row" style="pointer-events:none">
                    <iframe id="custReviewIframe" frameborder="0" marginheight="0" marginwidth="0"></iframe>
                </div>
            </div>
            <!-- Cart Page -->
            <div class="row" id="shoppingCartArea" style="display: none">
                <div id="shoppingCartTopDiv" class="col-md-12">
                    <div class="col-md-6" style="float:left">
                        <h4>Shopping Cart</h4>
                    </div>
                    <div class="col-md-6" style="float:right">
                        <button class="btn btn-primary" onclick="history.go(-1);" style="float:right">Close</button>
                    </div>
                </div>
                <div id="shoppingCartMainDiv">
                    <div id="shoppingCartLeftDiv" class="col-md-9">
                        <div class=" col-md-12" style="border-bottom:1px solid #bbb">
                            <div class="cartItemLeftDiv col-md-8">
                            </div>

                            <div class="cartItemCentreDiv col-md-2">
                                <p><b>Price</b></p>
                            </div>

                            <div class="cartItemRightDiv col-md-2">
                                <p><b>Quantity</b></p>
                            </div>
                        </div>
                        <div id="cartItemOuterContainer" class="col-md-12">
                        </div>
                    </div>
                    <div id="shoppingCartRightDiv" class="col-md-3">
                        <div id="checkoutMainDiv">
                            
                        </div>
                    </div>
                </div>
            </div>   
        </div>   
    </div>
    <div id="mainPane2" class="mainPaneChatOn">
           
    </div>
    <!-- Conference Pane -->
    <div id="chatPane" style="display:none">
        <div id="chatButtonsPane1">
            <button id="chatButton-hide" class="btn btn-info chatButtons" onclick="chatViewButtonClicked()">Hide</button>
        </div>
        <div id="chatInitiatePane">
            <form id="chatInitiateForm">
                <label>Invite up to 3 friends to join you in real-time!</label>
                <br/><br/>
                <label>Enter email adresses to send invite links or share the link below.</label>
                <br/><br/>
                <div class="form-group">
                    <input type="email" class="form-control" id="email1" placeholder="Enter an email address" 
                                oninvalid="setCustomValidity('Please enter a valid email address')" oninput="setCustomValidity('')">
                </div>
                <div class="form-group">
                    <input type="email" class="form-control" id="email2" placeholder="Enter an email address" 
                                oninvalid="setCustomValidity('Please enter a valid email address')" oninput="setCustomValidity('')">
                </div>
                <div class="form-group">
                    <input type="email" class="form-control" id="email3" placeholder="Enter an email address" 
                                oninvalid="setCustomValidity('Please enter a valid email address')" oninput="setCustomValidity('')">
                </div>
                <br/>
                <div class="form-group">
                    <label for="name">Preferred display name:</label>
                    <input type="text" class="form-control" id="displayName" required="true" placeholder="Please enter your name">
                </div>
                <br/>
                <input type="submit" class="btn btn-info" style="width:100%" value="Huddle!">
            </form>

            <div class="chatSharePane">
                <div class="col-sm-9"  style="padding:5px 0px 0px 0px !important;">
                    <input type="text" class="form-control linkedCopiedLabel" readonly="true" value="Link has been copied" style="display:none">
                    <input class="form-control chatShareInputs" id="chatShareInput1" type="text" value="" readonly="true">
                </div>
                <div class="col-sm-3"  style="padding:5px 0px 0px 0px !important;">
                    <button class="btn btn-info chatShareButtons" style="width:100%;"
                            data-clipboard-target="#chatShareInput1">Copy</button>
                </div>

                <div class="col-sm-12" id="sendLinkSocialButtonsDiv" style="padding:10px 0px 0px 0px !important;">
                    <label style="vertical-align:middle;padding-right:10px">Send Link:   </label>
                    
                    <a onclick="sendButtonClicked3();">
                        <span class="fab fa-facebook-f">
                        </span>
                    </a>
                </div>
            </div>
        </div>

        <div id="chatJoinPane">
            <form id="chatJoinForm">
                <br/>
                <div class="form-group">
                    <label for="name">Preferred display name:</label>
                    <input type="text" class="form-control" id="displayNameJoin" required="true" placeholder="Please enter your name">
                </div>
                <br/>
                <input type="submit" class="btn btn-info" style="width:100%" value="Huddle!">
            </form>
        </div>
        <div id="chatActivePane" style="display:none">
            <div id="chatButtonsPane2">
                <button id="chatButton-hide2" class="btn btn-info chatButtons" onclick="chatViewButtonClicked()">Hide</button>
                <button id="chatButton-end2" class="btn btn-info chatButtons" onclick="endHuddleHandler()">End Huddle</button>
            </div>
            <div id="remotes">
                <div class="videoContainer">
                    <video id="localVideo" controls="true" oncontextmenu="return false;" style="transform:scaleX(1) !important"></video>
                    <div id="localVolume" class="volume_bar"></div>
                </div>
            </div>
            <div class="chatSharePane">
                <div class="col-sm-9"  style="padding:5px 0px 0px 0px !important;">
                    <input type="text" class="form-control linkedCopiedLabel" readonly="true" value="Link has been copied" style="display:none">
                    <input class="form-control chatShareInputs" id="chatShareInput2" type="text" value="" readonly="true">
                </div>
                <div class="col-sm-3"  style="padding:5px 0px 0px 0px !important;">
                    <button class="btn btn-info chatShareButtons" style="width:100%;" data-clipboard-target="#chatShareInput2">Copy</button>
                </div>
            </div>
            <div id="textChatArea">
                <div id="textDisplayArea">
                    <div class="form-group" id="chatTextAreaOuterDiv">
                        <div id="chatTextDisplay" style="width:100%; height:100%; background-color:white; color:black; padding:5px; overflow:auto;">
                        </div>
                    </div>
                    <form class="form-inline" id="chatInputTextForm">
                        <div class="form-group" style="width:75%">
                            <input class="form-control" type="text" name="textInput" id="chatTextInput" placeholder="Enter message" style="width:100%">
                        </div>
                        <input type="submit" name="chatInputSubmit" id="chatInputSubmit" class="btn btn-info" style="margin:0px; width:20%;">
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="footer">
    <div style="text-align: center; margin-top: 20px">
        <ul class="list-group" style="margin-bottom:0px">
            <li>
            <img id="footerLogo" src="/huddlie-h35.png" onclick="viewController('homeBanner');">
            </li>
            <li>
            <br/>
                <label style="color:#5bc0de">&copy; 2018 Huddlie, Inc.</label>
            </li>
            <li>
                <a class="footerHyperLinks">Privacy Policy</a>  |  
                <a class="footerHyperLinks">Terms of Use</a>
            </li>
            <li>
                <label id="footerAmazonDisclosureLabel">As an Amazon Associate, Huddlie earns from qualifying purchases.</label>
            </li>
    </div>
</div>

<!-- Scripts start here -->

<script type="text/javascript">

    //SearchBarArea Begin
    var $hudnavCollapse = $('#hud-navCollapse'); //collapsible
        var $searchForm = $('#searchForm');
            var $selectRetailer = $('#selectRetailer');
            var $selectDept = $('#selectDept');
            var $searchWords = $('#searchWords');
            var $feedbackText = $('#feedbackText');
            var $searchButton = $('#searchButton');
            var $cartMainButton = $('#cartMainButton');
    //SearchBarArea End    
    var $fbButton = $('#fbButton');
    var $fbLogout = $('#fbLogout');

    var $throttleAlertBox = $('#throttleAlertBox');

    var $sharedTabButton = $('#sharedTabButton');
    var $personalTabButton = $('#personalTabButton');

    //Container Begin
    var $mainPane2 = $('#mainPane2');
    var $mainPane = $('#mainPane');
        var $multiSelectParent = $('#multi-select-parent');
            var $multi0DepartmentList = $('#multi0DepartmentList');
        var $multiSelect = $('#multi-select');
        var $bannersArea = $('#bannersArea');
        var $storeArea = $('#storeArea');
            var $tabSelector = $('#tabSelector');
            var $searchResultsArea = $('#searchResultsArea');
                var $filterArea = $('#filterArea');
                    var $filters = $('#filters'); //collapsible
                        var $browseNodeList = $('#browseNodeList');
                        var $brandList = $('#brandList');
                        var $brandChildList = $('#brandChildList');
                var $productArea = $('#productArea');
                    var $searchResults = $('#searchResults');
                    var $productBox = $('.product-box');
            var $itemDetails = $('#itemDetails');
                var $backToResultsForm = $('#backToResultsForm');
                    var $backToResultsButton = $('#backToResultsButton');
                    var $itemAltImgsDiv = $('#itemAltImgsDiv');
                        var $itemAltImgsUL = $('#itemAltImgsUL');
                    var $itemMainImgContainer = $('#itemMainImgContainer');
                            var $itemMainImgDiv = $('#itemMainImgDiv');
                    var $itemCenterTitle = $('#itemCenterTitle');
                    var $aboveTitleHR = $('#aboveTitleHR');
                        var $listPrice = $('#listPrice');
                            var $listPriceDiv = $('#listPriceDiv');
                        var $offerPrice = $('#offerPrice');
                            var $offerPriceDiv = $('#offerPriceDiv');
                        var $amountSaved = $('#amountSaved');
                            var $amountSavedDiv = $('#amountSavedDiv');
                        var $amznfulfilled = $('#amznfulfilled');
                    var $itemMerchantDiv = $('#itemMerchantDiv');
                    var $itemFeatureUL = $('#itemFeatureUL');
                    var $dimSelectorText = $('#dimSelectorText');
                    var $dimSelectorTextName = $('#dimSelectorTextName');
                    var $dimSelectorTextValue = $('#dimSelectorTextValue');
                    var $dimSelectorList = $('#dimSelectorList');
                    var $dimDropDownTextName = $('#dimDropDownTextName');
                    var $dimDropDownList = $('#dimDropDownList');
                    var $itemRight = $('#itemRight');
                            var $quantityDropDown = $('#quantityDropDown');
                            var $addToCartButton = $('#addToCartButton');
                            var $itemUnavailableTextDiv = $('#itemUnavailableTextDiv');
                            var $addToCartAvailabilityTextDiv = $('#addToCartAvailabilityTextDiv');
                            var $addToCartPrimeDiv = $('#addToCartPrimeDiv');
                            var $addToCartSuperSaverDiv = $('#addToCartSuperSaverDiv');
                        var $wishlistDropdownViewItem = $('#wishlistDropdown-viewitem');
                        var $wishlistNameInputViewItem = $('#wishlistNameInput-viewitem');
                var $itemBottomDiv = $('#itemBottomDiv');
                    var $custReviewIframe = $('#custReviewIframe');
            var $shoppingCartArea = $('#shoppingCartArea');
                        var $cartItemOuterContainer = $('#cartItemOuterContainer');
                        var $checkoutMainDiv = $('#checkoutMainDiv');
    var $chatPane = $('#chatPane');
        var $chatInitiatePane = $('#chatInitiatePane');
            var $chatInitiateForm = $('#chatInitiateForm');
                var $email1 = $('#email1');
                var $email2 = $('#email2');
                var $email3 = $('#email3');
                var $displayName = $('#displayName');
        var $chatJoinPane = $('#chatJoinPane');
            var $chatJoinForm = $('#chatJoinForm');
                var $displayNameJoin = $('#displayNameJoin');
        var $chatActivePane = $('#chatActivePane');
            var $remotes = $('#remotes');
                var $localVideo = $('#localVideo');
            var $textChatArea = $('#textChatArea');
                var $textDisplayArea = $('#textDisplayArea');
                    var $chatHistoryLabel = $('#chatHistoryLabel');
                    var $chatTextAreaOuterDiv = $('#chatTextAreaOuterDiv');
                        var $chatTextDisplay = $('#chatTextDisplay');
                    var $chatInputTextForm = $('#chatInputTextForm');
                        var $chatTextInput = $('#chatTextInput');
    //Container End
    
    //Box model for equal flyout height
    $('.box').matchHeight();

    //Set Initial State
    var socket = io('/');
    //End Initial State

    var clpbrd = new ClipboardJS('.chatShareButtons');

    clpbrd.on('success', function(e){
        $('.linkedCopiedLabel').show();
        $('.chatShareInputs').hide();

        setTimeout(function(){
            $('.linkedCopiedLabel').hide();
            $('.chatShareInputs').show();
        }, 2000);

        e.clearSelection();
    });

    var cookie = document.cookie.replace(/(?:(?:^|.*;\s*)HuddlieId\s*\=\s*([^;]*).*$)|^.*$/, "$1");
    if (cookie)
    {
        console.log(cookie);
        socket.emit('newUser',{huddlieId:cookie});
        if (sessionStorage){
          sessionStorage.setItem('huddlieId', cookie);
        }
    }
    else 
    {
        socket.emit('newUser',{huddlieId:''});
    }

    socket.on('setCookie', function(data){
        if (data && data.cookieVal && data.cookieVal != '')
        {
            var tempdate = new Date();
            tempdate.setTime(tempdate.getTime() + (30*24*60*60*1000));
            var expires = "; expires=" + tempdate.toUTCString();

            var cookieStr = 'HuddlieId='+data.cookieVal + expires + "; path=/";
            
            document.cookie = cookieStr;

            if (sessionStorage){
              sessionStorage.setItem('huddlieId', data.cookieVal);
              sessionStorage.setItem('activeWishlists', '');
              updateWishlistDropdownViewItem();
            }
        }
    });

    socket.on('activeWishlists', function(data){
      if (data && data.hasWishlists && data.hasWishlists == true)
      {
        sessionStorage.setItem('activeWishlists',JSON.stringify(data.wishlists));
        updateWishlistDropdownViewItem();
      }
      else
      {
        sessionStorage.setItem('activeWishlists', '');
        updateWishlistDropdownViewItem();
      }
    });

    if (sessionStorage){
        if (sessionStorage.getItem('currentRetailer')){
            var currentRetailer = sessionStorage.getItem('currentRetailer');

            $selectRetailer.val(currentRetailer);

            if (sessionStorage.getItem(currentRetailer+'-CartId')){
                if (sessionStorage.getItem(currentRetailer+'-cartItemCount')){
                    var itemCount = parseInt(sessionStorage.getItem(currentRetailer+'-cartItemCount'));
                    
                    if (itemCount != 0){
                        if (itemCount == 1){
                            var itemCountString = '1 Item';
                        }
                        else
                        {
                            var itemCountString = itemCount.toString()+' Items';
                        }

                        $cartMainButton.empty();
                        $cartMainButton.append('<img id="cartImage" src="/cartWhite2000.png" /> '+itemCountString);
                        
                        $cartMainButton.show();
                    }
                }
            }
        }

        if (sessionStorage.getItem('feedbackId') && 
            sessionStorage.getItem('feedbackId') != '')
        {
        }
        else
        {
            var newId = (Math.random() * new Date().getTime()).toString(24).toUpperCase().replace( /\./g , '-');
            sessionStorage.setItem('feedbackId', newId);
        }
    }

    retailerChanged();

    $(window).resize(resizeChatArea);
    $(window).trigger('resize');

    function resizeChatArea(){
        totalUsers = $('.videoContainer').length;
        console.log('total divs: '+totalUsers);

        var heightMultiplier = 1;
        var remainder = totalUsers % 2;

        if (remainder == 0){
            heightMultiplier = totalUsers / 2;
        }
        else
        {
            heightMultiplier = (totalUsers+1) / 2;
        }

        var height = $chatActivePane.outerHeight() - ($localVideo.outerHeight()*heightMultiplier) - ($chatInputTextForm.outerHeight()+60) - 60;
        $chatTextAreaOuterDiv.height(height+'px');
    }


    
    // grab the room from the URL
    var room = location.search && location.search.split('rmid=')[1];
    if (room){
        console.log(room);

        var shareURL = window.location.href.split(window.location.pathname)[0] + '?rmid=' + room;

        if (sessionStorage) {
            sessionStorage.setItem ('rmid', room);

            $('#chatShareInput1').val(shareURL);
            $('#chatShareInput2').val(shareURL);
        }

        var newUrl = 'home?rmid='+room;
        history.replaceState(JSON.stringify({'popEvent':'home'}),null,newUrl);
        $chatJoinPane.show();
        $('#chatButtonsPane1').show();
        viewController('chatOn');
        $chatInitiatePane.hide(); 
    }
    else
    {
        history.replaceState(JSON.stringify({'popEvent':'home'}),null,'home');
        $chatInitiatePane.show();
        $('#chatButtonsPane1').show();
        $chatJoinPane.hide();
    }


    $searchForm.submit(function(e){
        e.preventDefault();

        var feedbackText = $feedbackText.val();
        var searchWords = $searchWords.val();

        // FEEDBACK ENTERED AND THEN ENTER KEY PRESSED
        if (feedbackText && feedbackText != ''){
            console.log('feedback entered');
            if (sessionStorage && sessionStorage.getItem('feedbackId')
                    && sessionStorage.getItem('feedbackId') != ''){
                var feedbackId = sessionStorage.getItem('feedbackId');

                socket.emit('shortFeedback', {feedbackText: feedbackText, feedbackId: feedbackId});
            }
        }
        
        // SEARCH KEYWORDS ENTERED AND THEN ENTER KEY PRESSED
        // EXECUTE SEARCH IN THIS SCENARIO
        if (searchWords && searchWords != '')
        {
            console.log('search words entered');
            execSearch({lookupBrowseNode: true});
        }
    });

    function feedbackSubmitButtonClicked(){
        var feedbackText = $feedbackText.val();

        // FEEDBACK ENTERED AND THEN ENTER KEY PRESSED
        if (feedbackText && feedbackText != ''){
            console.log('feedback entered2');
            if (sessionStorage && sessionStorage.getItem('feedbackId')
                    && sessionStorage.getItem('feedbackId') != ''){
                var feedbackId = sessionStorage.getItem('feedbackId');

                socket.emit('shortFeedback', {feedbackText: feedbackText, feedbackId: feedbackId});
            }
        }
    }

    socket.on('shortFeedbackReply', function(data){
        if (data){
            if (data.isSuccess && data.isSuccess == true)
            {
                $feedbackText.val('Submitted successfully');
                setTimeout(function(){
                    $feedbackText.val('');
                }, 3000);
            }
            else
            {
                $feedbackText.val('Submission failed, please try again.');
                setTimeout(function(){
                    $feedbackText.val('');
                }, 3000);
            }
        }
    });

    $backToResultsForm.submit(function(e){
        e.preventDefault();
        console.log('backToResultsForm clicked');
        viewController('searchResults');
    });

    $chatInitiateForm.submit(function(e){
        e.preventDefault();
        console.log('chatInitiate Requested');
        initiateChat();
    });

    $chatJoinForm.submit(function(e){
        e.preventDefault();
        console.log('chatjoin Requested');
        joinChat(room);
    });

    $chatInputTextForm.submit(function(e){
        e.preventDefault();
        console.log('send message');
        sendMessage(false);
    });

    function sendMessage(isInitialJoinMessage){
        var username = '';
        var chatId = '';
        var message = '';

        if (sessionStorage){
            if(sessionStorage.getItem('username')){
                username = sessionStorage.getItem('username');
                message += '<b>'+username+':  </b>';
            }

            if(sessionStorage.getItem('chatId')){
                chatId = sessionStorage.getItem('chatId');
            }

            message += $chatTextInput.val();

            if(isInitialJoinMessage){
                message = '<b>-- '+username+' has joined --</b>';
            }

            $chatTextInput.val('');

            socket.emit('chatMessage', {message: message, chatId: chatId});
            resizeChatArea();
        }
    }

    function endHuddleHandler ()
    {
        var username = '';
        var chatId = '';
        var initiator = '';

        if (sessionStorage){
            if (sessionStorage.getItem('chatId'))
            {
                chatId = sessionStorage.getItem('chatId');
            }

            if (sessionStorage.getItem('username'))
            {
                username = sessionStorage.getItem('username');
            }

            if (sessionStorage.getItem('initiator'))
            {
                initiator = sessionStorage.getItem('initiator');
            }

            if (username != '' && chatId != '' && initiator != '')
            {
                var message = '<b>-- '+username+' has left --</b>';

                if (initiator == 'true')
                {
                    
                }
                else
                {
                    // socket.emit('chatMessage', {message:message, chatId: chatId});
                }

                endHuddleAndReload();
            }

        }
    }

    socket.on('endHuddleBroadcast', function(data){
        var initiatorName = '';

        if (data && data.initiator && data.initiator != ''){
            initiatorName = data.initiator;
        }

        var endMessage = '<br/><br/><b>-- The initiator '+initiatorName+' has left. This session will end automatically in 10 seconds. PLEASE STAY ON THIS TAB to keep your personal cart items. --</b>';
        $chatTextDisplay.append(endMessage);
        $chatTextDisplay.scrollTop($chatTextDisplay[0].scrollHeight);

        setTimeout(endHuddleAndReload, 12000);
    });

    function endHuddleAndReload ()
    {
        if (sessionStorage){
            if (sessionStorage.getItem('chatId'))
            {
                sessionStorage.removeItem('chatId');
            }

            if (sessionStorage.getItem('rmid'))
            {
                sessionStorage.removeItem('rmid');
            }
            
            if (sessionStorage.getItem('username'))
            {
                sessionStorage.removeItem('username');
            }

            if (sessionStorage.getItem('initiator'))
            {
                sessionStorage.removeItem('initiator');
            }

            if (sessionStorage.getItem('totalUsers'))
            {
                sessionStorage.removeItem('totalUsers');
            }

            location = window.location.href.split(window.location.pathname)[0];
        }
    }

    function sendButtonClicked3(){
        if (sessionStorage && sessionStorage.getItem('rmid') && sessionStorage.getItem('rmid') != '')
        {
            var room = sessionStorage.getItem('rmid');
            var url = window.location.href.split(window.location.pathname)[0] + '?rmid=' + room;
            // var url = 'https://huddlie.com' + '?rmid=' + room;
            console.log(url);
            var fbShareURL = 'https://www.facebook.com/sharer/sharer.php?u='+url;

            // window.open(fbShareURL,'_blank');
            window.open(fbShareURL,'targetWindow',
                                   'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=582px,height=424px');
        }
    }

    function sendMessageSharedItem(){
        console.log('called sendMessageSharedItem');
        var username = '';
        var chatId = '';
        var message = '';
        var retailer = '';
        var parentItem;

        if (sessionStorage){
            if(sessionStorage.getItem('username')){
                username = sessionStorage.getItem('username');
                message += '<b>'+username+'  </b> suggested ';
            }

            if(sessionStorage.getItem('chatId')){
                chatId = sessionStorage.getItem('chatId');
            }

            if(sessionStorage.getItem('currentRetailer')){
                retailer = sessionStorage.getItem('currentRetailer');
            }

            if (sessionStorage.getItem('parentItem')){
                parentItem = JSON.parse(sessionStorage.getItem('parentItem'));

                if (chatId != '' && retailer != '' && 
                    parentItem && parentItem.ASIN && parentItem.title){

                    var ASIN = parentItem.ASIN;
                    var title = parentItem.title;
                    title = title.substr(0,20) + '...';
                    
                    message += '<a class="sharedItemLink" onclick="'+
                                'handleSharedItem('+
                                '&quot;'+retailer+'&quot;'+
                                ',&quot;'+ASIN+'&quot;'+
                                ');">'+title+'</a><br/>';

                    socket.emit('chatMessage', {message: message, chatId: chatId});
                    socket.emit('itemSuggestedUpdateStats', {chatId: chatId});
                }
            }
        }
    }

    function handleSharedItem(retailer, ASIN)
    {
        $selectRetailer.val(retailer);
        retailerChanged();
        itemLookup(ASIN, '', ASIN);
        personalTab();
    }

    socket.on('chatHistory', function(data){
        if (data && data.chatHistory){
            $chatTextDisplay.empty();
            
            $chatTextDisplay.append(data.chatHistory);
            $chatTextDisplay.scrollTop($chatTextDisplay[0].scrollHeight);
        }
    });

    function sharedTab(){
        $sharedTabButton.removeClass();
        $sharedTabButton.addClass('btn');
        $sharedTabButton.addClass('btn-xs');
        $sharedTabButton.addClass('btn-success');

        $personalTabButton.removeClass();
        $personalTabButton.addClass('btn');
        $personalTabButton.addClass('btn-xs');
        $personalTabButton.addClass('btn-default');

        if ($chatPane.is(':visible')){
        }
        else
        {
            chatViewButtonClicked();
        }

        requestSharedDiv();
    }
    function personalTab(){
        $personalTabButton.removeClass();
        $personalTabButton.addClass('btn');
          $personalTabButton.addClass('btn-xs');
        $personalTabButton.addClass('btn-success');

        $sharedTabButton.removeClass();
        $sharedTabButton.addClass('btn');
        $sharedTabButton.addClass('btn-xs');
        $sharedTabButton.addClass('btn-default');

        $mainPane.show();
        $mainPane2.empty();
        $mainPane2.hide();

        $('#chatButton-hide2').prop('disabled', false);
    }


    function broadcastSharedTab(){
        if (sessionStorage && sessionStorage.getItem('chatId') && sessionStorage.getItem('initiator')){
            if (sessionStorage.getItem('initiator')=='true'){
                socket.emit('broadcastSharedTab', {chatId: sessionStorage.getItem('chatId'), storeDiv: $mainPane.html()});
            }
        }
    }
    socket.on('sharedDiv', function(data){
        if ($mainPane2.is(':visible') && data && data.sharedDiv){
            $mainPane2.html(data.sharedDiv);
        }
    });

    function requestSharedDiv(){
        if (sessionStorage && sessionStorage.getItem('chatId')){
            socket.emit('sharedDivRequest', {chatId: sessionStorage.getItem('chatId')});
        }
    }
    socket.on('sharedDivResponse', function(data){
        if (data && data.isSuccess && data.isSuccess == true){
            $mainPane2.html(data.sharedDiv);
            $mainPane2.show();
            $mainPane.hide();
            $('#chatButton-hide2').prop('disabled', true);
        }
    });

    function initiateChat(){
        //$(".overlay").show();

        var emails = [];
        var name = $displayName.val();
        var rmid = '';
        var url = '';

        if ($email1.val()){
            emails.push($email1.val());
        }
        if ($email2.val()){
            emails.push($email2.val());
        }
        if ($email3.val()){
            emails.push($email3.val());
        }

        if (sessionStorage && sessionStorage.getItem('rmid')){
            rmid = sessionStorage.getItem('rmid');
        }
        else
        {
            rmid = (Math.random() * new Date().getTime()).toString(36).toUpperCase().replace( /\./g , '-');
            if (sessionStorage){
                sessionStorage.setItem('rmid', rmid);
            }
        }

        var url = window.location.href.split(window.location.pathname)[0] + '?rmid=' + rmid;

        $('#chatShareInput1').val(url);
        $('#chatShareInput2').val(url);

        socket.emit('initiateChat', {emails: emails, name: name, rmid: rmid, url: url});

        if (sessionStorage){
            sessionStorage.setItem('username', name);
        }
    }

    socket.on('chatCreated', function(data){
        if (data && data.isSuccess && data.isSuccess == true){

            if (sessionStorage){
                sessionStorage.setItem('chatId', data.chatId);
                sessionStorage.setItem('initiator', true);

                broadcastSharedTab();
                sendMessage(true);
            }

            // create our webrtc connection
            var webrtc = new SimpleWebRTC({
                url:'https://fierce-river-31228.herokuapp.com/',
                // the id/element dom element that will hold "our" video
                localVideoEl: 'localVideo',
                // the id/element dom element that will hold remote videos
                remoteVideosEl: '',
                // immediately ask for camera access
                autoRequestMedia: true,
                debug: false,
                detectSpeakingEvents: true
            });

            // when it's ready, join if we got a room from the URL
            webrtc.on('readyToCall', function () {
                // you can name it anything
                if (room) webrtc.joinRoom(room);
                //console.log(webrtc);
                resizeChatArea();
            });
            function showVolume(el, volume) {
                if (!el) return;
                if (volume < -45) { // vary between -45 and -20
                    el.style.height = '0px';
                } else if (volume > -20) {
                    el.style.height = '100%';
                } else {
                    el.style.height = '' + Math.floor((volume + 100) * 100 / 25 - 220) + '%';
                }
            }
            webrtc.on('channelMessage', function (peer, label, data) {
                if (data.type == 'volume') {
                    showVolume(document.getElementById('volume_' + peer.id), data.volume);
                }
            });
            webrtc.on('videoAdded', function (video, peer) {
                console.log('VIDEO ADDED'+peer);
                video.controls = true;
                console.log('video added', peer);
                var remotes = document.getElementById('remotes');
                if (remotes) {
                    var d = document.createElement('div');
                    d.className = 'videoContainer';
                    d.id = 'container_' + webrtc.getDomId(peer);
                    d.appendChild(video);
                    var vol = document.createElement('div');
                    vol.id = 'volume_' + peer.id;
                    vol.className = 'volume_bar';
                    // video.onclick = function () {
                    //     video.style.width = video.videoWidth + 'px';
                    //     video.style.height = video.videoHeight + 'px';
                    // };
                    d.appendChild(vol);
                    remotes.appendChild(d);

                    resizeChatArea();
                }
            });
            webrtc.on('videoRemoved', function (video, peer) {
                console.log('video removed ', peer);
                var remotes = document.getElementById('remotes');
                var el = document.getElementById('container_' + webrtc.getDomId(peer));
                if (remotes && el) {
                    remotes.removeChild(el);
                    resizeChatArea();
                }
            });
            webrtc.on('volumeChange', function (volume, treshold) {
                //console.log('own volume', volume);
                showVolume(document.getElementById('localVolume'), volume);
            });

            webrtc.createRoom(data.chatId, function (err, name) {
                console.log(' create room cb', arguments);
                var newUrl = location.pathname + '?rmid=' + name;
                if (!err) {
                    var currentUrlParams = location.search && location.search.split('?')[1];
                    if (currentUrlParams){
                        var newUrl2 = location.pathname + '?' + currentUrlParams + '&rmid=' + name;
                        history.replaceState(history.state, null, newUrl2);
                    }
                    else
                    {
                        history.replaceState(history.state, null, newUrl);
                    }
                } else {
                    console.log('cb ERROR'+err);
                }
            });

            $chatInitiatePane.hide();
            $('#chatButtonsPane1').hide();
            $chatActivePane.show();
        }
    });

    socket.on('totalUsers', function(data){
        if (sessionStorage)
        {
            sessionStorage.setItem('totalUsers', data.totalUsers);
        }
    }); 

    function joinChat(chatId){
        var name = $displayNameJoin.val();
        socket.emit('joinChat', {name: name, chatId: chatId});

        if (sessionStorage){
            sessionStorage.setItem('username', name);
            sessionStorage.setItem('chatId', chatId);
        }
    }

    socket.on('chatJoined', function(data){
        if (data && data.isSuccess && data.isSuccess == true){

            if (sessionStorage){
                sessionStorage.setItem('totalUsers', data.totalUsers);
                sessionStorage.setItem('initiator', false);
            }

            viewController('chatActive');
            sharedTab();
            sendMessage(true);

            // create our webrtc connection
            var webrtc = new SimpleWebRTC({
                url:'https://fierce-river-31228.herokuapp.com/',
                // the id/element dom element that will hold "our" video
                localVideoEl: 'localVideo',
                // the id/element dom element that will hold remote videos
                remoteVideosEl: '',
                // immediately ask for camera access
                autoRequestMedia: true,
                debug: false,
                detectSpeakingEvents: true
            });
            // when it's ready, join if we got a room from the URL
            webrtc.on('readyToCall', function () {
                // you can name it anything
                if (room) webrtc.joinRoom(room);
                console.log(webrtc);
            });
            function showVolume(el, volume) {
                if (!el) return;
                if (volume < -45) { // vary between -45 and -20
                    el.style.height = '0px';
                } else if (volume > -20) {
                    el.style.height = '100%';
                } else {
                    el.style.height = '' + Math.floor((volume + 100) * 100 / 25 - 220) + '%';
                }
            }
            webrtc.on('channelMessage', function (peer, label, data) {
                if (data.type == 'volume') {
                    showVolume(document.getElementById('volume_' + peer.id), data.volume);
                }
            });
            webrtc.on('videoAdded', function (video, peer) {
                video.controls = true;
                console.log('video added', peer);
                var remotes = document.getElementById('remotes');
                if (remotes) {
                    var d = document.createElement('div');
                    d.className = 'videoContainer';
                    d.id = 'container_' + webrtc.getDomId(peer);
                    d.appendChild(video);
                    var vol = document.createElement('div');
                    vol.id = 'volume_' + peer.id;
                    vol.className = 'volume_bar';
                    // video.onclick = function () {
                    //     video.style.width = video.videoWidth + 'px';
                    //     video.style.height = video.videoHeight + 'px';
                    // };
                    d.appendChild(vol);
                    remotes.appendChild(d);

                    resizeChatArea();
                }
            });
            webrtc.on('videoRemoved', function (video, peer) {
                console.log('video removed ', peer);
                var remotes = document.getElementById('remotes');
                var el = document.getElementById('container_' + webrtc.getDomId(peer));
                if (remotes && el) {
                    remotes.removeChild(el);
                }
            });
            webrtc.on('volumeChange', function (volume, treshold) {
                //console.log('own volume', volume);
                showVolume(document.getElementById('localVolume'), volume);
            });

            $chatJoinPane.hide();
            $('#chatButtonsPane1').hide();
            $chatActivePane.show();
        }
    });

    function execSearch(params){
        console.log(params);

        $('#searchWords').autocomplete('close');

        if (sessionStorage){
            sessionStorage.setItem('currentRetailer', $selectRetailer.val());
        }

        $(".overlay").show();
        $hudnavCollapse.collapse('hide');
        $filters.collapse('hide');

        var browseNodeId = '';
        var browseNodeName = '';
        var minPrice = '';
        var maxPrice = '';
        var brand = '';
        var discount = '';
        var displayBrands = '';
        var updateDisplayBrands = false;

        if (params.nodeId){
            browseNodeId = params.nodeId;
        }

        if (params.nodeName){
            browseNodeName = params.nodeName;
        }

        if (params.minPrice){
            minPrice = params.minPrice;
        }

        if (params.maxPrice){
            maxPrice = params.maxPrice;
        }

        if (params.brand && params.brand != ''){
            brand = params.brand; 
            updateDisplayBrands = true;
        }

        if (params.discount){
            discount = params.discount;
        }

        var department;
        if (params.dept && params.dept != ''){
            $selectDept.val(params.dept);
            department = params.dept;
        }
        else {
            department = $selectDept.val();
        }

        var retailer;
        if (params.retailer && params.retailer != ''){
            $selectRetailer.val(params.retailer);
            retailer = params.retailer;
        }
        else {
            retailer = '';
        }

        var keywords;
        if (params.keyw && params.keyw != ''){
            $searchWords.val(params.keyw);
            keywords = params.keyw;
        }
        else {
            keywords = $searchWords.val();
        }

        var page = 1;
        if (params && params.pagenum){
            page = params.pagenum;
        }

        var lookupBrowseNode = false;
        if (params && params.lookupBrowseNode){
            lookupBrowseNode = params.lookupBrowseNode;
        }

        console.log('department: '+department);

        if (sessionStorage){
            if(sessionStorage.getItem('currentRetailer') && retailer == ''){
                retailer = sessionStorage.getItem('currentRetailer');
            } 
            else
            {
                retailer = $selectRetailer.val();
                sessionStorage.setItem('currentRetailer', retailer);
            }

            if (updateDisplayBrands == true){
                if (sessionStorage.getItem(retailer+'-currentSearchParams')){
                    var currentSearchParams = JSON.parse(sessionStorage.getItem(retailer+'-currentSearchParams'));

                    if (currentSearchParams.displayBrands && currentSearchParams.displayBrands != ''){
                        displayBrands = currentSearchParams.displayBrands;
                    }
                }
            }

            sessionStorage.setItem(retailer+'-currentSearchParams', JSON.stringify(
                    {dept: department, 
                        keyw: keywords, 
                        retailer: retailer, 
                        nodeId: browseNodeId, 
                        nodeName: browseNodeName,
                        pagenum: page,
                        minPrice: minPrice,
                        maxPrice: maxPrice,
                        brand: brand, 
                        discount: discount,
                        lookupBrowseNode: lookupBrowseNode,
                        displayBrands: displayBrands
                    }));
        }

        socket.emit('searchParams', {
            dept: department, 
            keyw: keywords, 
            retailer: $selectRetailer.val(), 
            nodeId: browseNodeId, 
            nodeName: browseNodeName, 
            pagenum: page, 
            minPrice: minPrice,
            maxPrice: maxPrice,
            brand: brand,
            discount: discount,
            lookupBrowseNode: lookupBrowseNode,
            displayBrands: displayBrands,
            maxCallCount: '5'});
    }

    socket.on('printResponse', function(data){
        console.log(data);
    });

    socket.on('getNodePathAndChildrenResponse', function(data){
        console.log(data);
        if (data && data.isSuccess && data.isSuccess == true){
            var browseNodeDivText = '';
            var disabledText = '';

            if (data.path && data.path.constructor === Array){
                var path = data.path;
                path.reverse();

                if (path[0] && path[0].pathNodeId && path[0].pathNodeId == '1571272031'){
                    $selectDept.val('Apparel');
                }

                for (i=0;i<path.length;i++){
                    browseNodeDivText+= '<li class="ancestorNode"><a class="btn'+disabledText+
                            '" onclick="execSearch({nodeId: &quot;'+data.path[i].pathNodeId+'&quot;,'+
                                        'nodeName: &quot;'+data.path[i].pathNodeName+'&quot;,'+
                                        'dept: &quot;'+$selectDept.val()+'&quot;,'+
                                        'lookupBrowseNode: true})">'+data.path[i].pathNodeName+'</a></li>';
                }
            }

            browseNodeDivText+= '<li class="ancestorNodeCurrent"><a class="btn disabled">'+data.nodeName+'</a></li>'; 

            if (data.children && data.children.constructor === Array){
                var children = data.children;
                browseNodeDivText+= '<ul class="childList">';
                
                for (i=0;i<children.length;i++){
                    browseNodeDivText+= '<li class="childNode"><a class="btn'+disabledText+
                            '" onclick="execSearch({nodeId: &quot;'+data.children[i].nodeId+'&quot;,'+
                                        'nodeName: &quot;'+data.children[i].nodeName+'&quot;,'+
                                        'dept: &quot;'+$selectDept.val()+'&quot;,'+
                                        'lookupBrowseNode: true})">'+children[i].nodeName+'</a></li>';
                }
                
                browseNodeDivText+= '</ul>';
            }

            $browseNodeList.empty();
            if (browseNodeDivText != ''){
                $browseNodeList.append(browseNodeDivText);
            }
        }
    });

    socket.on('searchResult2', function(data){
        console.log(data);
    });

    socket.on('searchResult', function(data){
        console.log(data);
        if (data.failed == true){
            if (data.ItemSearchErrorResponse && data.ItemSearchErrorResponse.Error && data.ItemSearchErrorResponse.Error.Code){
                console.log(data.ItemSearchErrorResponse);
                switch (data.ItemSearchErrorResponse.Error.Code){
                    case 'RequestThrottled':
                        $throttleAlertBox.show();
                        break;
                    default:
                        break;
                }
            }

            $(".overlay").hide();
            broadcastSharedTab();
        }
        else
        {
            var searchResponse = data.searchResponse;
            
            //CANT SET DEPT HERE BECAUSE US DEPTS ARE SAME IN APPAREL AND SHOES etc.
            // $selectDept.val(searchResponse.dept);
            // setDept(searchResponse.dept);
            
            if (searchResponse.displayBrands && searchResponse.displayBrands.constructor === Array
                    && searchResponse.displayBrands.length > 0){

                if (searchResponse.retailer && searchResponse.retailer != ''
                        && sessionStorage 
                        && sessionStorage.getItem(searchResponse.retailer+'-currentSearchParams')){
                    
                    var currentSearchParams = JSON.parse(sessionStorage.getItem(searchResponse.retailer+'-currentSearchParams'));
                    console.log(currentSearchParams);
                    sessionStorage.setItem(searchResponse.retailer+'-currentSearchParams',
                            JSON.stringify({
                                dept: currentSearchParams.dept,
                                retailer: currentSearchParams.retailer,
                                keyw: currentSearchParams.keyw,
                                nodeId: currentSearchParams.nodeId,
                                nodeName: currentSearchParams.nodeName,
                                pagenum: currentSearchParams.pagenum,
                                brand: currentSearchParams.brand,
                                minPrice: currentSearchParams.minPrice,
                                maxPrice: currentSearchParams.maxPrice,
                                discount: currentSearchParams.discount,
                                lookupBrowseNode: currentSearchParams.lookupBrowseNode,
                                displayBrands: JSON.stringify(searchResponse.displayBrands)
                            }));
                }

                $brandList.show();
                $brandChildList.empty();

                var brandChildDivText = '';
                var displayBrands = searchResponse.displayBrands;
                displayBrands.sort();

                for(index=0; index < displayBrands.length; index++){
                    var checkedString = 'checked';

                    if (searchResponse.brand.indexOf(displayBrands[index]) == -1){
                        checkedString = '';
                    }

                    brandChildDivText += '<li class="brandChildList">'+
                                            '<div class="checkbox">'+
                                                '<label>'+
                                                    '<input id="brandItem'+index+'"'+
                                                            'onclick="brandClicked(&quot;'+index+'&quot;);"'+
                                                            'type="checkbox" '+
                                                            'value="'+displayBrands[index]+'"'+
                                                            'class="brandCheckbox"'+
                                                            checkedString+'>'+
                                                    displayBrands[index]+
                                                '</label>'+
                                            '</div>'+
                                        '</li>';
                }

                $brandChildList.append(brandChildDivText);
            }
            else
            {
                $brandList.hide();
            }

            if (searchResponse.minPrice && searchResponse.minPrice != '' && searchResponse.minPrice != '0'){
                $('#minPrice').val(parseInt(searchResponse.minPrice)/100);
            }
            else
            {
                $('#minPrice').val('');
            }

            if (searchResponse.maxPrice && searchResponse.maxPrice != ''){
                $('#maxPrice').val(parseInt(searchResponse.maxPrice)/100);
            }
            else
            {
                $('#maxPrice').val('');
            }

            if (searchResponse.isNotInitialSearch && searchResponse.isNotInitialSearch == true){
                if (searchResponse.pagenum && sessionStorage){
                    sessionStorage.setItem('currentResultsPageNum', searchResponse.pagenum);
                }
                else 
                {
                    if (sessionStorage && sessionStorage.getItem('currentResultsPageNum')){
                        var tempPageNum = sessionStorage.getItem('currentResultsPageNum');
                        tempPageNum++;
                        sessionStorage.setItem('currentResultsPageNum', tempPageNum);
                    }    
                }  
            }
            else
            {
                $searchResults.empty();
                sessionStorage.setItem('currentResultsPageNum', 1);
            }

            if (searchResponse.items && searchResponse.items.constructor === Array){
                for (i=0; i<searchResponse.items.length; i++){
                    var item = searchResponse.items[i];

                    var ASIN = '';
                    var displayASIN = '';
                    var similarItems = '';
                    var price = 'N/A';
                    var imageURL = '';
                    var title = '';
                    var brand = '';
                    var primeImageHtml = '<img height="14px">';

                    if (item.ASIN){
                        ASIN = item.ASIN;
                    }

                    if (item.displayASIN){
                        displayASIN = item.displayASIN;
                    }

                    if (item.similarItems && item.similarItems != '' && ASIN != ''){
                        similarItems = item.similarItems;
                    }

                    if (item.title){
                        title = item.title;
                    }

                    if (item.price){
                        price = item.price;
                    }

                    if (item.imageURL){
                        imageURL = item.imageURL;
                    }

                    if (item.brand){
                        brand = 'By '+ item.brand;
                    }

                    if (item.isEligibleForPrime && item.isEligibleForPrime == true){
                        primeImageHtml = '<img src="/prime-check-badge-14._CB138348888_.png">';
                    }

                    var productBoxClass = 'product-box';
                    if ($chatPane.is(':visible')){
                        productBoxClass = 'product-box-chat-on';
                    }

                    var divText =   '<div id="'+ASIN.toString()+
                            '" onclick="itemLookup(&quot;'+ASIN.toString()+
                                                    '&quot;,&quot;'+similarItems+
                                                    '&quot;,&quot;'+displayASIN+'&quot;)"'+
                            ' class="'+productBoxClass+'">'+
                                        '<div class="product-image-div middle">'+
                                            '<img class="product-image" src="'+ imageURL +'">'+
                                        '</div>'+
                                        '<div class="product-title">'+ title +'<br><p>'+ brand +'</p></div>'+
                                        '<div class="product-prime-box">'+primeImageHtml+'</div>' +
                                        '<p class="product-price">'+price+'</p>'+
                                    '</div>';

                    $searchResults.append(divText);
                }
            }

            $(".overlay").hide();
            viewController('searchResults');

            broadcastSharedTab();
        }
    });

    //ITEM LOOKUP
    function itemLookup(itemASIN, similarItems, displayASIN){
        $(".overlay").show();
        console.log(itemASIN+similarItems+displayASIN);

        if (sessionStorage){
            if (sessionStorage.getItem('currentOfferListingId')){
                sessionStorage.removeItem('currentOfferListingId');
            }
            if (!sessionStorage.getItem('currentRetailer')){
                sessionStorage.setItem('currentRetailer', $selectRetailer.val());
            }
        }

        socket.emit('itemLookup', {itemASIN: itemASIN, 
                                    similarItems: similarItems, 
                                    displayASIN: displayASIN, 
                                    retailer: $selectRetailer.val(),
                                    maxCallCount: '5'});
    }

    //END ITEM LOOKUP
    function setmainpic(item){
        $(".itemMainImg").attr("src",item.src);
    }

    //Receive Item Lookup Results
    socket.on('itemLookupResult', function(data){
        console.log(data);
        if (data.failed){
            if (data.ItemLookupErrorResponse && data.ItemLookupErrorResponse.Error && data.ItemLookupErrorResponse.Error.Code){
                console.log(data.ItemLookupErrorResponse);
                switch (data.ItemLookupErrorResponse.Error.Code){
                    case 'RequestThrottled':
                        $throttleAlertBox.show();
                        break;
                    default:
                        break;
                }
            }

            $(".overlay").hide();
            broadcastSharedTab();
        }
        else
        {
            // make this disabled if item not available (below).
            $addToCartButton.attr('disabled',false);

            if (sessionStorage){
                if (sessionStorage.getItem('currentMainDimVal')){
                    sessionStorage.removeItem('currentMainDimVal');
                }

                if (sessionStorage.getItem('currentMainImgURL')){
                    sessionStorage.removeItem('currentMainImgURL');
                }
            }

            if (data && data.parentItem && data.allVariations && data.mapVariations && data.similarItems){
                var parentItem = data.parentItem;
                var allVariations = data.allVariations;
                var mapVariations = data.mapVariations;
                var similarItems = data.similarItems;

                if (sessionStorage){
                    sessionStorage.setItem('parentItem', JSON.stringify(parentItem));
                    sessionStorage.setItem('allVariations', JSON.stringify(allVariations));
                    sessionStorage.setItem('mapVariations', JSON.stringify(mapVariations));
                    sessionStorage.setItem('similarItems', JSON.stringify(similarItems));
                }

                var altImgsDivText='';
                var mainImgDivText='';
                var titleDivText;
                var merchantDivText;
                var listPriceDivText;
                var offerPriceDivText;
                var amountSavedDivText;
                var featuresDivText = '';
                var isFulfilled = false;
                var percentSaved = '';
                var firstToReviewText = '<a>Be the first to review this item</a>';

                if (sessionStorage){
                    if (sessionStorage.getItem('currentASIN')){
                        sessionStorage.removeItem('currentASIN');
                    }
                    if (sessionStorage.getItem('currentOfferListingId')){
                        sessionStorage.removeItem('currentOfferListingId');
                    }
                    if (sessionStorage.getItem('currentItemImgURL')){
                        sessionStorage.removeItem('currentItemImgURL');
                    }
                    if (sessionStorage.getItem('currentItemMaxQty')){
                        sessionStorage.removeItem('currentItemMaxQty');
                    }

                    sessionStorage.setItem('currentASIN', parentItem.displayASIN);
                }

                if (parentItem.hasReviews == true){
                    $aboveTitleHR.empty();
                    $custReviewIframe.show();
                    $custReviewIframe.attr("src", parentItem.reviewIFrameURL);
                    $custReviewIframe.attr("height", '600px');
                }
                else
                {
                    $aboveTitleHR.empty();
                    $aboveTitleHR.append(firstToReviewText);

                    $custReviewIframe.hide();
                }

                $dimSelectorTextName.empty();
                if (parentItem.mainVariationDim != ''){
                    $dimSelectorTextName.append('<b>'+parentItem.mainVariationDim+': </b>');   
                }

                $dimDropDownTextName.empty();
                if (parentItem.secVariationDim != ''){
                    $dimDropDownTextName.append('<b>'+parentItem.secVariationDim+': </b>');   
                }

                //TITLE
                $itemCenterTitle.empty();
                titleDivText = parentItem.title;
                $itemCenterTitle.append(titleDivText);

                //FEATURES
                for (i=0; i<parentItem.features.length; i++){
                    featuresDivText+= '<li>'+parentItem.features[i]+'</li>';
                }
                
                $itemFeatureUL.empty();
                $itemFeatureUL.append(featuresDivText);

                //MAXQTY
                if (parentItem.maxQty != '0'){
                    var quantityDropDownText = '';

                    var totalNew = parseInt(parentItem.maxQty);

                    if (sessionStorage){
                        sessionStorage.setItem('currentItemMaxQty', totalNew);
                    }

                    for (i = 1; i<= totalNew; i++){
                        quantityDropDownText += '<option value="'+i+'">'+i+'</option>';
                    }

                    $quantityDropDown.empty();
                    $quantityDropDown.append(quantityDropDownText);
                }
                else
                {
                    if (sessionStorage){
                        sessionStorage.setItem('currentItemMaxQty', 1);
                    }

                    $quantityDropDown.empty();
                    $quantityDropDown.append('<option value="1">1</option>');
                }

                //Offer Listing stuff
                $itemUnavailableTextDiv.hide();

                var item;

                //variations = yes, but displaying parent item.
                //Or, no variations.
                if (parentItem.ASIN == parentItem.displayASIN)
                {
                    item = parentItem;
                }
                // variations = yes, and displaying specific variation
                else
                {
                    for(i=0; i<allVariations.length; i++){
                        if (allVariations[i].ASIN == parentItem.displayASIN){
                            item = allVariations[i];
                            console.log(item);
                            break;
                        }
                    }
                }

                // OfferListingId
                if (item.offerListingId != ''){
                    sessionStorage.setItem('currentOfferListingId', item.offerListingId);
                }

                // Is AMAZON FULFILLED?
                if (item.isFulfilled){
                    isFulfilled = true;
                    $amznfulfilled.show();
                    $addToCartSuperSaverDiv.show();
                }
                else{
                    $amznfulfilled.hide();
                    $addToCartSuperSaverDiv.hide();
                }

                // is Prime Eligible?
                if (item.isEligibleForPrime){
                    $addToCartPrimeDiv.show();
                }
                else
                {
                    $addToCartPrimeDiv.hide();
                }

                // Availability Text
                if (item.availability != ''){
                    $addToCartAvailabilityTextDiv.empty();
                    $addToCartAvailabilityTextDiv.append('<b>Availability: </b>'+item.availability);  
                }

                // %saved, offerprice, amountsaved, listprice
                percentSaved = item.percentageSaved;
                offerPriceDivText = item.offerPrice;
                amountSavedDivText = item.amountSaved;
                listPriceDivText = item.listPrice;

                var isItemAvailable = item.isItemAvailable;

                if (item.needMapping == true && parentItem.ASIN == parentItem.displayASIN){
                    isItemAvailable = false;
                }

                if (item.needMapping == false && item.isVariationParent == false && parentItem.ASIN == parentItem.displayASIN){
                    isItemAvailable = true;
                }

                //is Item available for purchase?
                if (item.isItemAvailable == false){
                    if (!item.isVariationParent){
                        $itemUnavailableTextDiv.show();
                    }
                    
                    $addToCartButton.attr('disabled',true);
                    offerPriceDivText = 'N/A';
                }

                // Merchant Name
                merchantDivText = 'Sold By <a>'+item.merchantName+'</a>';
                if (isFulfilled){
                    merchantDivText+=' and <a target="_blank" href="https://www.amazon.in/gp/help/customer/display.html?ie=UTF8&ref=dp_fulfillment&nodeId=200953360">Fulfilled by Amazon</a>.';
                }

                $itemMerchantDiv.empty();
                if (item.merchantName != ''){
                    $itemMerchantDiv.append(merchantDivText);
                }

                // Append prices
                if (percentSaved && percentSaved != ''){
                    $listPrice.show();
                    $listPriceDiv.empty();
                    $listPriceDiv.append(listPriceDivText);

                    $offerPrice.show();
                    $offerPriceDiv.empty();
                    $offerPriceDiv.append(offerPriceDivText);

                    $amountSaved.show();
                    $amountSavedDiv.empty();
                    $amountSavedDiv.append(amountSavedDivText+' ('+percentSaved+'%)');
                }
                else
                {
                    $listPrice.hide();
                    $amountSaved.hide();

                    $offerPrice.show();
                    $offerPriceDiv.empty();

                    if (item.isVariationParent){
                        $offerPriceDiv.append(listPriceDivText);
                    }
                    else
                    {
                        $offerPriceDiv.append(offerPriceDivText);
                    }
                }

                //Main Img
                mainImgDivText = '<img class="itemMainImg" src="'+item.mainImgURL+'">';
                if (sessionStorage){
                    sessionStorage.setItem('currentItemImgURL', item.mainImgURL);
                }

                // Alt Imgs
                for (i=0; i < item.altImgList.length; i++){
                    altImgsDivText+=    '<li>'+
                                            '<img class="itemAltImg-box" src="'+item.altImgList[i]+'"'+
                                            'onmouseover="setmainpic(this);"'+
                                            '>'+
                                        '</li>';
                }

                if (altImgsDivText != ''){
                    $itemAltImgsUL.empty();
                    $itemAltImgsUL.append(altImgsDivText);
                }
                if (mainImgDivText != ''){
                    $itemMainImgDiv.empty();
                    $itemMainImgDiv.append(mainImgDivText);
                }

                $dimDropDownList.empty();
                $dimDropDownList.hide();
                $dimDropDownTextName.hide();
                $dimSelectorTextValue.hide();
                    
                var dimSelectorListDivText = '';
                for (t=0; t< mapVariations.length; t++){
                    var liClass = 'itemAltImg-box-dim';

                    if (parentItem.isVariationParent == true && parentItem.ASIN == parentItem.displayASIN && t==0){
                        liClass = 'itemAltImg-box-dim-selected';

                        if (sessionStorage){
                            sessionStorage.setItem('currentMainImgURL', mapVariations[0].imgURL);
                            sessionStorage.setItem('currentMainDimVal', mapVariations[0].mainDimVal);
                            setCurrentDimVals();
                            $dimSelectorTextValue.show();
                        }

                        var secArray = mapVariations[t].secDimItems;
                        console.log(secArray);
                        var secDropDownDivText = '<option value="" selected="selected">Select</option>';
                        for (s=0; s< secArray.length; s++){
                            secDropDownDivText += '<option value="'+secArray[s].ASIN+'">'+secArray[s].secDimVal+'</option>';
                        }


                        if (secDropDownDivText != '' && parentItem.secVariationDim != ''){
                            $dimDropDownList.append(secDropDownDivText);
                            $dimDropDownList.show();
                            $dimDropDownTextName.show();
                        }
                    }


                    if (item.mainDimVal == mapVariations[t].mainDimVal){
                        
                        liClass = 'itemAltImg-box-dim-selected';
                        if (sessionStorage){
                            sessionStorage.setItem('currentMainImgURL', mapVariations[t].imgURL);
                            sessionStorage.setItem('currentMainDimVal', mapVariations[t].mainDimVal);
                            setCurrentDimVals();
                            $dimSelectorTextValue.show();
                        }


                        if (parentItem.needMapping == true){
                            var secArray = mapVariations[t].secDimItems;
                            console.log(secArray);
                            var secDropDownDivText = '<option value="">Select</option>';
                            for (s=0; s< secArray.length; s++){
                                var selectedText = '';
                                if (secArray[s].ASIN == item.ASIN){
                                    selectedText = 'selected="selected"';
                                }
                                secDropDownDivText += '<option value="'+secArray[s].ASIN+'"" '+selectedText+'">'+secArray[s].secDimVal+'</option>';
                            }


                            if (secDropDownDivText != '' && parentItem.secVariationDim != ''){
                                $dimDropDownList.append(secDropDownDivText);
                                $dimDropDownList.show();
                            }

                        }
                    }

                    dimSelectorListDivText += '<li ;><img id="'+mapVariations[t].mainDimVal.replace(/ +/g, "")+
                        '" onclick=dimChanged(this) class="'+liClass+'" '+
                        'src="'+mapVariations[t].imgURL+'" '+
                        'onmouseover="setmainpic(this);'+
                        'document.getElementById(&quot;dimSelectorTextValue&quot;).innerHTML = '+
                                '&quot;'+ mapVariations[t].mainDimVal+'&quot;;" '+
                        'onmouseout="setCurrentDimVals();"></li>';
                }

                $dimSelectorList.hide();
                if (dimSelectorListDivText != ''){
                    $dimSelectorList.empty();
                    $dimSelectorList.append(dimSelectorListDivText);

                    $dimSelectorList.show();
                    $dimSelectorText.show();
                }

                if (parentItem.needMapping == true){
                    //variations = yes, but displaying parent item.
                    //Or, no variations.
                    if (parentItem.ASIN == parentItem.displayASIN)
                    {

                    }
                    // variations = yes, and displaying specific variation
                    else
                    {
                        
                    }
                }
                
                if (mapVariations.length == 1 && mapVariations[0].mainDimVal == 'Generic'){
                    $dimSelectorText.hide();
                    $dimSelectorList.hide();
                }

                $(".overlay").hide();
                viewController('itemDetails');

                broadcastSharedTab();
            }
        }
    });

    function dimChanged(item) {
        // console.log('this is the id = '+item.id);   
        if (item.class == "itemAltImg-box-dim-selected") {

        }
        else
        {
            var val = item.id;

            if (sessionStorage && sessionStorage.getItem('mapVariations')){
                var mapVariations = JSON.parse(sessionStorage.getItem('mapVariations'));
                console.log(mapVariations);

                for (i=0; i<mapVariations.length; i++){
                    if (mapVariations[i].mainDimVal.replace(/ +/g, "") == val){
                        var variation = mapVariations[i];

                        console.log(variation);

                        $('.itemAltImg-box-dim-selected').removeClass("itemAltImg-box-dim-selected").addClass("itemAltImg-box-dim");
                        $('#'+val).removeClass("itemAltImg-box-dim").addClass("itemAltImg-box-dim-selected");

                        if (variation.ASIN != ''){
                            setVariationItemByASIN(variation.ASIN);
                        }
                        else
                        {
                            var secArray = variation.secDimItems;
                            console.log(secArray);

                            var ASIN='';
                            var secDropDownDivText = '';
                            for (s=0; s< secArray.length; s++){
                                var selectedText = '';
                                if (s==0){
                                    selectedText = 'seclected="selected"';
                                    ASIN = secArray[s].ASIN 
                                }
                                secDropDownDivText += '<option value="'+secArray[s].ASIN+'"'+selectedText+'>'+secArray[s].secDimVal+'</option>';
                            }

                            if (secDropDownDivText != ''){
                                $dimDropDownList.empty();
                                $dimDropDownList.append(secDropDownDivText);
                                $dimDropDownList.show();
                                $dimDropDownTextName.show();
                            }

                            if(ASIN != ''){
                                setVariationItemByASIN(ASIN);
                            }
                        }

                        break;
                    }
                }
            }
        }
    }

    function setVariationItemByASIN(ASIN){
        
        var currentASIN = '';

        if (ASIN && ASIN != ''){
            currentASIN = ASIN;
        }
        else
        {
            currentASIN = $dimDropDownList.val();
        }

        // console.log('Selected ASIN is = '+currentASIN);

        if (currentASIN != ''){
            if (sessionStorage && sessionStorage.getItem('allVariations')){
                var variations = JSON.parse(sessionStorage.getItem('allVariations'));

                if (variations && variations.constructor === Array && variations.length > 0){
                    for (i=0; i<variations.length; i++){
                        var variation = variations[i];

                        if (variation && variation.ASIN && variation.ASIN == currentASIN){

                            var item = variation;
                            var altImgsDivText='';
                            var mainImgDivText='';
                            var titleDivText;
                            var merchantDivText;
                            var listPriceDivText;
                            var offerPriceDivText;
                            var amountSavedDivText;
                            var featuresDivText = '';
                            var isFulfilled = false;
                            var percentSaved = '';
                            var firstToReviewText = '<a>Be the first to review this item</a>';

                            if (sessionStorage){
                                if (sessionStorage.getItem('currentASIN')){
                                    sessionStorage.removeItem('currentASIN');
                                }
                                if (sessionStorage.getItem('currentOfferListingId')){
                                    sessionStorage.removeItem('currentOfferListingId');
                                }
                                if (sessionStorage.getItem('currentItemImgURL')){
                                    sessionStorage.removeItem('currentItemImgURL');
                                }

                                sessionStorage.setItem('currentASIN', item.ASIN);
                            }

                            // OfferListingId
                            if (item.offerListingId != ''){
                                $addToCartButton.attr('disabled',false);
                                sessionStorage.setItem('currentOfferListingId', item.offerListingId);
                            }

                            // Is AMAZON FULFILLED?
                            if (item.isFulfilled){
                                isFulfilled = true;
                                $amznfulfilled.show();
                                $addToCartSuperSaverDiv.show();
                            }
                            else{
                                $amznfulfilled.hide();
                                $addToCartSuperSaverDiv.hide();
                            }

                            // is Prime Eligible?
                            if (item.isEligibleForPrime){
                                $addToCartPrimeDiv.show();
                            }
                            else
                            {
                                $addToCartPrimeDiv.hide();
                            }

                            // Availability Text
                            if (item.availability != ''){
                                $addToCartAvailabilityTextDiv.empty();
                                $addToCartAvailabilityTextDiv.append('<b>Availability: </b>'+item.availability);  
                            }

                            // %saved, offerprice, amountsaved, listprice
                            percentSaved = item.percentageSaved;
                            offerPriceDivText = item.offerPrice;
                            amountSavedDivText = item.amountSaved;
                            listPriceDivText = item.listPrice;

                            var isItemAvailable = item.isItemAvailable;

                            if (item.needMapping == true && parentItem.ASIN == parentItem.displayASIN){
                                isItemAvailable = false;
                            }

                            if (item.needMapping == false && item.isVariationParent == false && parentItem.ASIN == parentItem.displayASIN){
                                isItemAvailable = true;
                            }

                            //is Item available for purchase?
                            if (item.isItemAvailable == false){
                                if (!item.isVariationParent){
                                    $itemUnavailableTextDiv.show();
                                }
                                
                                $addToCartButton.attr('disabled',true);
                                offerPriceDivText = 'N/A';
                            }

                            // Merchant Name
                            merchantDivText = 'Sold By <a>'+item.merchantName+'</a>';
                            if (isFulfilled){
                                merchantDivText+=' and <a target="_blank" href="https://www.amazon.in/gp/help/customer/display.html?ie=UTF8&ref=dp_fulfillment&nodeId=200953360">Fulfilled by Amazon</a>.';
                            }

                            $itemMerchantDiv.empty();
                            if (item.merchantName != ''){
                                $itemMerchantDiv.append(merchantDivText);
                            }

                            // Append prices
                            if (percentSaved && percentSaved != ''){
                                $listPrice.show();
                                $listPriceDiv.empty();
                                $listPriceDiv.append(listPriceDivText);

                                $offerPrice.show();
                                $offerPriceDiv.empty();
                                $offerPriceDiv.append(offerPriceDivText);

                                $amountSaved.show();
                                $amountSavedDiv.empty();
                                $amountSavedDiv.append(amountSavedDivText+' ('+percentSaved+'%)');
                            }
                            else
                            {
                                $listPrice.hide();
                                $amountSaved.hide();

                                $offerPrice.show();
                                $offerPriceDiv.empty();

                                if (item.isVariationParent){
                                    $offerPriceDiv.append(listPriceDivText);
                                }
                                else
                                {
                                    $offerPriceDiv.append(offerPriceDivText);
                                }
                            }

                            //Main Img
                            mainImgDivText = '<img class="itemMainImg" src="'+item.mainImgURL+'">';
                            if (sessionStorage){
                                sessionStorage.setItem('currentItemImgURL', item.mainImgURL);
                            }

                            // Alt Imgs
                            for (i=0; i < item.altImgList.length; i++){
                                altImgsDivText+=    '<li>'+
                                                        '<img class="itemAltImg-box" src="'+item.altImgList[i]+'"'+
                                                        'onmouseover="setmainpic(this);"'+
                                                        '>'+
                                                    '</li>';
                            }

                            if (altImgsDivText != ''){
                                $itemAltImgsUL.empty();
                                $itemAltImgsUL.append(altImgsDivText);
                            }
                            if (mainImgDivText != ''){
                                $itemMainImgDiv.empty();
                                $itemMainImgDiv.append(mainImgDivText);
                            }

                            break;
                        }
                    }
                }
            }
        }
    }

    function setCurrentDimVals(){
        if (sessionStorage){
            if (sessionStorage.getItem('currentMainDimVal')){
                document.getElementById('dimSelectorTextValue').innerHTML = sessionStorage.getItem('currentMainDimVal');
            }

            if (sessionStorage.getItem('currentMainImgURL')){
                $(".itemMainImg").attr("src",sessionStorage.getItem('currentMainImgURL').toString());
                // setmainpic(sessionStorage.getItem('currentMainImgURL').toString());   
            }
        }
    }

    //ADD TO CART
    function addToCartClicked(){
        if (sessionStorage && sessionStorage.getItem('currentRetailer')){
            var currentRetailer = sessionStorage.getItem('currentRetailer');
            if (sessionStorage.getItem(currentRetailer+'-CartId') && sessionStorage.getItem(currentRetailer+'-HMAC')){
                //add to existing cart here;
                console.log('adding to existing cart');
                if (sessionStorage.getItem('currentOfferListingId')){
                    $(".overlay").show();
                    socket.emit('addToCart', {retailer: currentRetailer, offerListingId: sessionStorage.getItem('currentOfferListingId'), quantity: $quantityDropDown.val(), cartId: sessionStorage.getItem(currentRetailer+'-CartId'), hmac: sessionStorage.getItem(currentRetailer+'-HMAC')});
                }
            }
            else
            {
                //create a new cart here;
                console.log('creating new cart');
                if (sessionStorage.getItem('currentOfferListingId')){
                    $(".overlay").show();
                    socket.emit('createCart', {retailer: currentRetailer, offerListingId: sessionStorage.getItem('currentOfferListingId'), quantity: $quantityDropDown.val()});
                }
            }
        }
    }
    //END ADD TO CART
    //Receive New Cart
    socket.on('createCartResult', function(data){
        console.log(data);
        if (sessionStorage && sessionStorage.getItem('currentRetailer') && data.CartCreateResponse){
            var currentRetailer = sessionStorage.getItem('currentRetailer');

            if (data.CartCreateResponse.Cart && data.CartCreateResponse.Cart.CartId){
                sessionStorage.setItem(currentRetailer+'-CartId', data.CartCreateResponse.Cart.CartId);
            }
            if (data.CartCreateResponse.Cart && data.CartCreateResponse.Cart.HMAC){
                sessionStorage.setItem(currentRetailer+'-HMAC', data.CartCreateResponse.Cart.HMAC);
            }
            if (data.CartCreateResponse.Cart && data.CartCreateResponse.Cart.URLEncodedHMAC){
                sessionStorage.setItem(currentRetailer+'-URLEncodedHMAC', data.CartCreateResponse.Cart.URLEncodedHMAC);
            }
        }

        if (sessionStorage && sessionStorage.getItem('currentRetailer')){
            var currentRetailer = sessionStorage.getItem('currentRetailer');

            if (sessionStorage.getItem(currentRetailer+'-cartItemDetailArray')){
                sessionStorage.removeItem(currentRetailer+'-cartItemDetailArray');
            }

            var ASIN = '';
            var imgURL = '';
            var maxQty = '';

            if (sessionStorage.getItem('currentASIN')){
                ASIN = sessionStorage.getItem('currentASIN');
            }
            if (sessionStorage.getItem('currentItemImgURL')){
                imgURL = sessionStorage.getItem('currentItemImgURL');
            }
            if (sessionStorage.getItem('currentItemMaxQty')){
                maxQty = sessionStorage.getItem('currentItemMaxQty');
            }

            sessionStorage.setItem(currentRetailer+'-cartItemDetailArray', JSON.stringify([{'ASIN':ASIN, 'imgURL':imgURL, 'maxQty':maxQty}]));

            sessionStorage.setItem(currentRetailer+'-cartItemCount', '1');
            // visitStatUpdateManager({updateType:'cartCount'});
            $cartMainButton.empty();
            $cartMainButton.append('<img id="cartImage" src="/cartWhite2000.png" /> 1 Item');
            $cartMainButton.show();
        }

        $(".overlay").hide();

        viewCart();
    });
    //END Receive New Cart
    //Receive Add to Cart Result
    socket.on('addToCartResult', function(data){
        console.log(data);

        if (sessionStorage && sessionStorage.getItem('currentRetailer')){ 
            var currentRetailer = sessionStorage.getItem('currentRetailer');

            if (sessionStorage.getItem(currentRetailer+'-cartItemDetailArray')){
                var imgDetailArray = JSON.parse(sessionStorage.getItem(currentRetailer+'-cartItemDetailArray'));

                var ASIN = '';
                var imgURL = '';
                var maxQty = '';

                if (sessionStorage.getItem('currentASIN')){
                    ASIN = sessionStorage.getItem('currentASIN');
                }
                if (sessionStorage.getItem('currentItemImgURL')){
                    imgURL = sessionStorage.getItem('currentItemImgURL');
                }
                if (sessionStorage.getItem('currentItemMaxQty')){
                    maxQty = sessionStorage.getItem('currentItemMaxQty');
                }

                imgDetailArray.push({'ASIN':ASIN,'imgURL':imgURL, 'maxQty':maxQty});

                sessionStorage.setItem(currentRetailer+'-cartItemDetailArray', JSON.stringify(imgDetailArray));
            }

            if (sessionStorage.getItem(currentRetailer+'-cartItemCount')){
                var cartItemCount = parseInt(sessionStorage.getItem(currentRetailer+'-cartItemCount'));
                cartItemCount++;
                // visitStatUpdateManager({updateType:'cartCount'});

                sessionStorage.setItem(currentRetailer+'-cartItemCount', cartItemCount.toString());

                $cartMainButton.empty();
                $cartMainButton.append('<img id="cartImage" src="/cartWhite2000.png" /> '+cartItemCount.toString()+' Items');
                $cartMainButton.show();
            }
        }


        $(".overlay").hide();

        viewCart();
    });
    //END receive Add to Cart Result

    //BEGIN View Cart
    function viewCart(checkOutClicked){
        if (checkOutClicked && checkOutClicked == true){
            visitStatUpdateManager({updateType:'checkOut'});
        }

        if (sessionStorage && sessionStorage.getItem('currentRetailer')){
            var currentRetailer = sessionStorage.getItem('currentRetailer');

            if (sessionStorage.getItem(currentRetailer+'-CartId') && sessionStorage.getItem(currentRetailer+'-HMAC')){
                $(".overlay").show();
                socket.emit('getCart', {retailer: currentRetailer, cartId: sessionStorage.getItem(currentRetailer+'-CartId'), hmac: sessionStorage.getItem(currentRetailer+'-HMAC')});
            }
        }
    }
    //END View Cart
    //Receive Get Cart
    socket.on('getCartResult', function(data){

        console.log(data);

        if (data.isFailed && data.isFailed == true){
            viewCart();
        }

        $checkoutMainDiv.empty();
        $cartItemOuterContainer.empty();

        var cartItemOuterContainerDivText = '';
        var checkoutMainDivText = '';

        var currentRetailer = '';
        var itemCountString = '';
        var subtotalString = '';
        var detailArray = [];

        if (sessionStorage && sessionStorage.getItem('currentRetailer')){
            currentRetailer = sessionStorage.getItem('currentRetailer');

            if (sessionStorage.getItem(currentRetailer+'-cartItemDetailArray')){
                detailArray = JSON.parse(sessionStorage.getItem(currentRetailer+'-cartItemDetailArray'));
            }
        }

        if (data.CartGetResponse && data.CartGetResponse.Cart){
            var cart = data.CartGetResponse.Cart;

            if (cart.CartItems){

                // ----------  BEGIN CART ITEMS --------- 

                if (cart.CartItems.CartItem){

                    var items = [];

                    if (cart.CartItems.CartItem.constructor === Array){
                        for (i=0; i < cart.CartItems.CartItem.length; i++){
                            items.push(cart.CartItems.CartItem[i]);
                        }
                    }
                    else
                    {
                        items.push(cart.CartItems.CartItem);
                    }
                    console.log('items lenght: '+items.length);

                    for (i=0; i<items.length; i++){
                        var item = items[i];

                        var ASIN = '';
                        var title = '';
                        var merchant = '';
                        var price = '';
                        var quantity = '';
                        var imgURL = '';
                        var maxQty = 1;
                        var cartItemId = '';

                        if (item.ASIN){
                            ASIN = item.ASIN;

                            if (detailArray && detailArray.constructor === Array && detailArray.length > 0){
                                for (t=0;t<detailArray.length;t++){
                                    if (detailArray[t].ASIN && detailArray[t].ASIN == ASIN){
                                        if (detailArray[t].imgURL){
                                            imgURL = detailArray[t].imgURL;    
                                        }
                                        
                                        if (detailArray[t].maxQty){
                                            maxQty = parseInt(detailArray[t].maxQty);
                                        }
                                    }
                                }
                            }
                        }

                        if (item.CartItemId){
                            cartItemId = item.CartItemId;
                        }

                        if (item.Title){
                            title = item.Title;
                        }

                        if (item.SellerNickname){
                            merchant = item.SellerNickname;
                        }

                        if (item.Quantity){
                            quantity = item.Quantity;
                        }

                        if (item.Price && item.Price.FormattedPrice){
                            price = item.Price.FormattedPrice;
                        }

                        cartItemOuterContainerDivText +=
                                        '<div class="cartItemContainerDiv col-md-12">'+
                                            '<div class="cartItemLeftDiv col-md-8">'+
                                                '<div class="col-md-3">'+
                                                    '<img class="cartItemImg" src="'+imgURL+'"/>'+
                                                '</div>'+
                                                '<div class="col-md-9">'+
                                                    '<a onclick="itemLookup(&quot;'+ASIN+'&quot;,&quot;&quot;,&quot;'+ASIN+'&quot;)"><h5><b>'+title+'</b></h5></a>'+
                                                    '<p>Sold by <b>'+merchant+'</b></p>'+
                                                    '<button class="btn btn-primary" onclick="modifyCart(&quot;'+cartItemId+'&quot;,0);"'+
                                                            'style="padding:1px 10px 1px 10px !important">Delete</button>'+
                                                '</div>'+
                                            '</div>'+

                                            '<div class="cartItemCentreDiv col-md-2">'+
                                                '<p>'+price+'</p>'+
                                            '</div>'+

                                            '<div class="cartItemRightDiv col-md-2">'+
                                                '<div class="input-group">'+
                                                    '<span class="input-group-btn">'+
                                                      '<button type="button" class="btn btn-default btn-number" onclick="changeQuantity(&quot;'+cartItemId+'&quot;,&quot;minus&quot;)">'+
                                                          '<span class="glyphicon glyphicon-minus"></span>'+
                                                      '</button>'+
                                                    '</span>'+
                                                    '<input type="text" name="'+cartItemId+'" class="form-control input-number" value="'+quantity+'" min="1" max="'+maxQty+'">'+
                                                    '<span>'+
                                                      '<button type="button" class="btn btn-default btn-number" onclick="changeQuantity(&quot;'+cartItemId+'&quot;,&quot;plus&quot;);">'+
                                                          '<span class="glyphicon glyphicon-plus"></span>'+
                                                      '</button>'+
                                                    '</span>'+
                                                '</div>'+
                                            '</div>'+
                                        '</div>';
                    }

                    $cartItemOuterContainer.append(cartItemOuterContainerDivText);

                }

                // ----------  END CART ITEMS ---------

                // ----------  BEGIN item count and SUBTOTAL  -----------

                if (cart.CartItems.CartItem){
                    if (cart.CartItems.CartItem && cart.CartItems.CartItem.constructor === Array){
                        itemCountString = cart.CartItems.CartItem.length.toString() + ' items';
                        if (sessionStorage){
                            sessionStorage.setItem(currentRetailer+'-cartItemCount', cart.CartItems.CartItem.length);

                            $cartMainButton.empty();
                            $cartMainButton.append('<img id="cartImage" src="/cartWhite2000.png" /> '+cart.CartItems.CartItem.length+' Items');
                        }
                    }
                    else {
                        itemCountString = '1 item';
                        if (sessionStorage){
                            sessionStorage.setItem(currentRetailer+'-cartItemCount', '1');

                            $cartMainButton.empty();
                            $cartMainButton.append('<img id="cartImage" src="/cartWhite2000.png" /> 1 Item');
                        }
                    }
                }
                else
                {
                    if (sessionStorage && sessionStorage.getItem(currentRetailer+'-cartItemCount')){
                        var itemCount = parseInt(sessionStorage.getItem(currentRetailer+'-cartItemCount'));

                        if (itemCount && itemCount == 1){
                            itemCountString = '1 item';
                        }
                        else 
                        {
                            itemCountString = itemCount.toString() + ' items';
                        }
                    }
                }

                if (cart.CartItems.SubTotal && cart.CartItems.SubTotal.FormattedPrice){
                    subtotalString = cart.CartItems.SubTotal.FormattedPrice;
                }
                else
                {
                    if (cart.SubTotal && cart.SubTotal.FormattedPrice){
                        subtotalString = cart.SubTotal.FormattedPrice;
                    }
                }
                checkoutMainDivText += '<div class="checkoutMainDivItem">'+
                                                '<p><b>Subtotal ('+itemCountString+'): </b>'+subtotalString+'</p>'+
                                            '</div>';

                // --------  END item count and SUBTOTAL  ---------

                // --------  BEGIN Checkout Button  -----------

                if (cart.PurchaseURL){
                    checkoutMainDivText += '<div class="checkoutMainDivItem">'+
                                                '<a href="'+cart.PurchaseURL+'" target="_blank">'+
                                                    '<button class="btn btn-primary" onclick="viewCart(true);">Proceed to Checkout</button>'+
                                                '</a>'+
                                            '</div>'
                }

                // --------  END Checkout Button  -----------

                $checkoutMainDiv.append(checkoutMainDivText);
            }
            else {
                if (sessionStorage && sessionStorage.getItem(currentRetailer+'-cartItemCount')){
                    sessionStorage.setItem(currentRetailer+'-cartItemCount', '0');
                }

                $cartMainButton.empty();
                $cartMainButton.hide();
                $('.overlay').hide();
                return;
            }
        }        

        viewController('viewCart');
        $('.overlay').hide();

        broadcastSharedTab();

    });

    //End Receive Cart
    //BEGIN Cart Plus Minus Click
    function changeQuantity(cartItemId, changeType){
        console.log('plusminusbuttonclicked: '+cartItemId+', '+changeType);
        
        var input = $("input[name='"+cartItemId+"']");
        var currentVal = parseInt(input.val());
        console.log('current: '+currentVal);
        if (!isNaN(currentVal)) {
            if(changeType == 'minus') {
                
                if(currentVal > input.attr('min')) {
                    // input.val(currentVal - 1).change();
                    modifyCart(cartItemId, (currentVal - 1));
                } 
                if(parseInt(input.val()) == input.attr('min')) {
                    $(this).attr('disabled', true);
                }

            } else if(changeType == 'plus') {

                if(currentVal < input.attr('max')) {
                    // input.val(currentVal + 1).change();
                    modifyCart(cartItemId, (currentVal + 1));
                }
                if(parseInt(input.val()) == input.attr('max')) {
                    $(this).attr('disabled', true);
                }

            }
        } else {
            input.val(0);
        }
    };
    //END Cart Plus Minus Click
    //BEGIN modify cart
    function modifyCart(cartItemId, quantity){
        console.log('cartITemId: '+cartItemId+', quantity: '+ quantity);
        if (sessionStorage && sessionStorage.getItem('currentRetailer')){
            var currentRetailer = sessionStorage.getItem('currentRetailer');

            if (sessionStorage.getItem(currentRetailer+'-CartId') && sessionStorage.getItem(currentRetailer+'-HMAC')){
                $(".overlay").show();
                socket.emit('modifyCart', {retailer: currentRetailer, cartId: sessionStorage.getItem(currentRetailer+'-CartId'), hmac: sessionStorage.getItem(currentRetailer+'-HMAC'), cartItemId: cartItemId, quantity: quantity});
            }
        }
    }
    //END modify cart

    //Receive modify cart result
    socket.on('modifyCartResult', function(data){
        console.log(data);

        $(".overlay").hide();
        viewCart();
    });
    //END receive modify cart result

    function copyToClipboard(elementId) {

        window.clipboardData.setData('Text', $('#'+elementId).val());
        console.log(window.clipboardData);
        document.execCommand('copy');
    }

    //Begin chatViewButtonClicked
    function chatViewButtonClicked(){
        console.log('chat function called');
        if ($chatPane.is(':visible')){
            viewController('chatOff');
        }
        else
        {
            if (sessionStorage) {
                var rmid = '';
                if (!sessionStorage.getItem('rmid')){
                    rmid = (Math.random() * new Date().getTime()).toString(36).toUpperCase().replace( /\./g , '-');
                    sessionStorage.setItem('rmid', rmid);
                }
                else
                {
                    rmid = sessionStorage.getItem('rmid');
                }

                var url = window.location.href.split(window.location.pathname)[0] + '?rmid=' + rmid;

                $('#chatShareInput1').val(url);
                $('#chatShareInput2').val(url);
            } 

            viewController('chatOn');
        }
    }
    //End chatViewButtonClicked

    window.addEventListener('popstate', function(e) {
        console.log(e);

        var state = JSON.parse(e.state);
        console.log(state);

        switch(state.popEvent){
            case 'home':
                if (sessionStorage){
                    sessionStorage.setItem('isPopStateEvent', true);
                }

                viewController('homeBanner');
                break;
            case 'search':
                if (sessionStorage){
                    sessionStorage.setItem('isPopStateEvent', true);
                }

                execSearch({
                            dept: state.dept,
                            retailer: state.retailer,
                            keyw: state.keyw,
                            nodeId: state.nodeId,
                            nodeName: state.nodeName,
                            pagenum: state.pagenum,
                            minPrice: state.minPrice,
                            maxPrice: state.maxPrice,
                            brand: state.brand,
                            discount: state.discount,
                            displayBrands: state.displayBrands,
                            lookupBrowseNode: state.lookupBrowseNode
                            });
                break;
            case 'viewitem':
                if (sessionStorage){
                    sessionStorage.setItem('isPopStateEvent', true);
                }
                
                itemLookup(state.ASIN,'',state.ASIN);

                break;
            case 'viewcart':
                if (sessionStorage){
                    sessionStorage.setItem('isPopStateEvent', true);

                    sessionStorage.setItem('currentRetailer', state.retailer);
                    sessionStorage.setItem(state.retailer+'-CartId', state.CartId);
                    sessionStorage.setItem(state.retailer+'-HMAC', state.HMAC);
                    sessionStorage.setItem(state.retailer+'-URLEncodedHMAC', state.URLEncodedHMAC);
                    console.log('here 1');
                    viewCart();
                }

                break;
            default:
                break;
        }
    });

    function visitStatUpdateManager (user){

        switch(user.updateType){
            case 'view':
                socket.emit('visitStatUpdate', {updateType: user.updateType, currentView: user.currentView});
                break;
            case 'checkOut':
                socket.emit('visitStatUpdate', {updateType: user.updateType});
                break;
            case 'cartCount':
                socket.emit('visitStatUpdate', {updateType: user.updateType});
                break;
        }
    }

    function viewController(mode){
        var pushState = true;

        var state, url, rmid = '';

        if (sessionStorage && sessionStorage.getItem('isPopStateEvent')){
            if (sessionStorage.getItem('isPopStateEvent') == 'true'){
                pushState = false;
                sessionStorage.removeItem('isPopStateEvent');
            }
        }

        switch(mode){
            case 'homeBanner':
                // SHOW
                $bannersArea.show();
                $searchResultsArea.show();
                $multiSelect.show();

                // HIDE
                $storeArea.hide();
                $itemDetails.hide();
                $shoppingCartArea.hide();
                $searchWords.hide();
                $searchButton.hide();

                //SCROLLTOP
                document.body.scrollTop = 0;
                document.documentElement.scrollTop = 0;

                //HISTORY API PUSHSTATE VALUES
                state = JSON.stringify({'popEvent':'home'});
                console.log(state);
                rmid = location.search && location.search.split('rmid=')[1];
                url = 'home';
                if (rmid && rmid != ''){
                    url += '?rmid='+rmid;
                }
                //END HISTORY API PUSHSTATE VALUES

                broadcastSharedTab();
                visitStatUpdateManager({updateType:'view',currentView:'home'});

                break;
            case 'searchResults':
                //SHOW
                $storeArea.show();
                $searchResultsArea.show();
                $searchWords.show();
                $searchButton.show();

                //HIDE
                $bannersArea.hide();
                $itemDetails.hide();
                $shoppingCartArea.hide();
                $multiSelect.hide();

                if ($chatPane.is(':visible')){
                    $('.product-box').removeClass("product-box").addClass("product-box-chat-on");
                }

                //HISTORY API PUSHSTATE VALUES
                url = 'search';
                var urlExtension = [];

                var tempState = {
                                'popEvent':'search',
                                'retailer': '',
                                'dept': '',
                                'keyw': '',
                                'nodeId': '',
                                'nodeName': '',
                                'pagenum': '',
                                'minPrice': '',
                                'maxPrice': '',
                                'brand': '',
                                'discount': '',
                                'displayBrands': '',
                                'lookupBrowseNode': ''
                                };

                if (sessionStorage && sessionStorage.getItem('currentRetailer')){
                    var currentRetailer = sessionStorage.getItem('currentRetailer');

                    if (sessionStorage.getItem(currentRetailer+'-currentSearchParams')){
                        //state
                        var searchParams = JSON.parse(sessionStorage.getItem(currentRetailer+'-currentSearchParams'));
                        
                        tempState.retailer = searchParams.retailer;
                        tempState.dept = searchParams.dept;
                        tempState.keyw = searchParams.keyw;
                        tempState.nodeId = searchParams.nodeId;
                        tempState.nodeName = searchParams.nodeName;
                        tempState.pagenum = 1;
                        tempState.minPrice = searchParams.minPrice;
                        tempState.maxPrice = searchParams.maxPrice;
                        tempState.brand = searchParams.brand;
                        tempState.discount = searchParams.discount;
                        tempState.displayBrands = searchParams.displayBrands;
                        tempState.lookupBrowseNode = searchParams.lookupBrowseNode;

                        if (searchParams && searchParams.retailer){
                            urlExtension.push('retailer='+searchParams.retailer);
                        }
                        if (searchParams && searchParams.dept){
                            urlExtension.push('dept='+searchParams.dept);
                        }
                        if (searchParams && searchParams.nodeId){
                            urlExtension.push('node='+searchParams.nodeId);
                        }
                    }
                }
                
                state = JSON.stringify(tempState);

                rmid = location.search && location.search.split('rmid=')[1];

                if (urlExtension && urlExtension.constructor === Array && urlExtension.length > 0){
                    url += '?'+urlExtension.join('&');

                    if (rmid && rmid != ''){
                        url += '&rmid=' + rmid;
                    }
                }
                else
                {
                    if (rmid && rmid != ''){
                        url += '?rmid=' + rmid;
                    }
                }
                //END HISTORY API PUSHSTATE VALUES

                visitStatUpdateManager({updateType:'view',currentView:'searchResults'});

                break;
            case 'itemDetails':
                //SHOW
                $storeArea.show();
                $itemDetails.show();
                $searchWords.show();
                $searchButton.show();

                //HIDE
                $bannersArea.hide();
                $searchResultsArea.hide();
                $shoppingCartArea.hide();
                $multiSelect.hide();

                //SCROLLTOP
                document.body.scrollTop = 0;
                document.documentElement.scrollTop = 0;

                //HISTORY API PUSHSTATE VALUES
                url = 'viewitem';
                var urlExtension = [];
                var tempState = {
                            'popEvent':'viewitem',
                            'retailer':'',
                            'ASIN':''
                        };
                if (sessionStorage){
                    if (sessionStorage.getItem('currentRetailer')){
                        var currentRetailer = sessionStorage.getItem('currentRetailer');
                        urlExtension.push('retailer=' + currentRetailer);
                        tempState.retailer = currentRetailer;
                    }
                    if (sessionStorage.getItem('currentASIN')){
                        var currentASIN = sessionStorage.getItem('currentASIN');
                        urlExtension.push('id='+currentASIN);
                        tempState.ASIN = currentASIN;
                    }
                }

                state = JSON.stringify(tempState);

                rmid = location.search && location.search.split('rmid=')[1];

                if (urlExtension && urlExtension.constructor === Array && urlExtension.length > 0){
                    url += '?'+urlExtension.join('&');

                    if (rmid && rmid != ''){
                        console.log('rmid2');
                        console.log(rmid);
                        url += '&rmid=' + rmid;
                    }
                }
                else
                {
                    if (rmid && rmid != ''){
                        url += '?rmid=' + rmid;
                    }
                }
                //END HISTORY API PUSHSTATE VALUES

                visitStatUpdateManager({updateType:'view',currentView:'productDetail'});

                break;
            case 'viewCart':
                //SHOW
                $storeArea.show();
                $shoppingCartArea.show();
                $searchWords.show();
                $searchButton.show();

                //HIDE
                $itemDetails.hide();
                $bannersArea.hide();
                $searchResultsArea.hide();
                $multiSelect.hide();

                //HISTORY API PUSHSTATE VALUES
                url = 'viewcart';
                var urlExtension = [];
                var tempState = {
                            'popEvent':'viewcart',
                            'retailer':'',
                            'CartId':'',
                            'HMAC':'',
                            'URLEncodedHMAC':''
                        };
                if (sessionStorage){
                    if (sessionStorage.getItem('currentRetailer')){
                        var currentRetailer = sessionStorage.getItem('currentRetailer');
                        urlExtension.push('retailer=' + currentRetailer);
                        tempState.retailer = currentRetailer;

                        if (sessionStorage.getItem(currentRetailer+'-CartId')){
                            var cartId = sessionStorage.getItem(currentRetailer+'-CartId');
                            urlExtension.push('id='+cartId);
                            tempState.CartId = cartId;
                        }
                        if (sessionStorage.getItem(currentRetailer+'-HMAC')){
                            var HMAC = sessionStorage.getItem(currentRetailer+'-HMAC');
                            tempState.HMAC = HMAC;
                        }
                        if (sessionStorage.getItem(currentRetailer+'-URLEncodedHMAC')){
                            var URLEncodedHMAC = sessionStorage.getItem(currentRetailer+'-URLEncodedHMAC');
                            tempState.URLEncodedHMAC = URLEncodedHMAC;
                        }
                    }
                }

                state = JSON.stringify(tempState);

                rmid = location.search && location.search.split('rmid=')[1];

                if (urlExtension && urlExtension.constructor === Array && urlExtension.length > 0){
                    url += '?'+urlExtension.join('&');

                    if (rmid && rmid != ''){
                        url += '&rmid=' + rmid;
                    }
                }
                else
                {
                    if (rmid && rmid != ''){
                        url += '?rmid=' + rmid;
                    }
                }
                //END HISTORY API PUSHSTATE VALUES

                visitStatUpdateManager({updateType:'view',currentView:'viewCart'});

                break;
            case 'chatOn':
                console.log('chat On chosen');
                $chatPane.show();
                $mainPane.removeClass("mainPaneChatOff").addClass("mainPaneChatOn");
                $('.product-box').removeClass("product-box").addClass("product-box-chat-on");

                $hudnavCollapse.css('margin-left', '-30px');

                pushState = false;

                $('.tabSelectorChatOff').removeClass('tabSelectorChatOff').addClass('tabSelectorChatOn');

                $('#chatViewButton').hide();
                $('.chatViewButtonOuter').hide();
                break;
            case 'chatOff':
            console.log('chat Off chosen');
                $chatPane.hide();
                $mainPane.removeClass("mainPaneChatOn").addClass("mainPaneChatOff");
                $('.product-box-chat-on').removeClass("product-box-chat-on").addClass("product-box");

                $hudnavCollapse.css('margin-left', '0px');

                pushState = false;

                $('.tabSelectorChatOn').removeClass('tabSelectorChatOn').addClass('tabSelectorChatOff');

                $('#chatViewButton').show();
                $('.chatViewButtonOuter').show();
                break;
            case 'chatActive':
                if (sessionStorage && sessionStorage.getItem('initiator')){
                    if (sessionStorage.getItem('initiator') == 'false'){
                        $tabSelector.show();       
                    }
                }

                pushState = false;
                break;
            case 'huddleOn':
                $fbButton.hide();
                $fbLogout.show();

                pushState = false;
                break;
            case 'huddleOff':
                $fbButton.show();
                $fbLogout.hide();

                pushState = false;
                break;
            default:
                pushState = false;
                break;
        }

        if (pushState){
            history.pushState(state, null, url);
        }
    }

    function retailerChanged(){
        var retailer = $selectRetailer.val();

        var departmentsIN = '<option value="Apparel" data-INID="1571272031">Apparel</option>'+
                            '<option value="Beauty" data-INID="1355017031">Beauty</option>'+
                            '<option value="Jewelry" data-INID="1951049031">Jewellery</option>'+
                            '<option value="Shoes" data-INID="1571284031">Shoes and Handbags</option>'+
                            '<option value="SportingGoods" data-INID="1984444031">Sports, Fitness, and Outdoors</option>'+
                            '<option value="Watches" data-INID="1350388031">Watches</option>';
        var departmentsUS = '<option value="FashionWomen" data-USID="7147440011">Fashion - Women</option>'+
                            '<option value="FashionMen" data-USID="7147441011">Fashion - Men</option>'+
                            '<option value="FashionGirls" data-USID="7147442011">Fashion - Girls</option>'+
                            '<option value="FashionBoys" data-USID="7147443011">Fashion - Boys</option>'+
                            '<option value="FashionBaby" data-USID="7147444011">Fashion - Baby</option>'+
                            '<option value="Beauty" data-USID="11055981">Beauty</option>'+
                            '<option value="SportingGoods" data-USID="3375301">Sports, Fitness, and Outdoors</option>';

        switch(retailer){
            case 'IN':
                $selectDept.empty();
                $selectDept.append(departmentsIN);

                retailerSelected('IN', false);

                $('#priceFilters-IN').show();
                $('#priceFilters-US').hide();

                $('#flyoutDivAmazonUS').hide();
                $('#flyoutDivAmazonIN').show();

                break;
            case 'US':
                $selectDept.empty();
                $selectDept.append(departmentsUS);

                retailerSelected('US', false);

                $('#priceFilters-US').show();
                $('#priceFilters-IN').hide();

                $('#flyoutDivAmazonUS').show();
                $('#flyoutDivAmazonIN').hide();

                break;
            default:
                break;
        }

        if (sessionStorage){
            sessionStorage.setItem('currentRetailer', $selectRetailer.val());
            viewController('homeBanner');
        }
    }

    function retailerSelected(retailer, callRetailerChange) {
        var currentRetailer = $selectRetailer.val();

        if (currentRetailer == '' || currentRetailer != retailer || callRetailerChange == false){
            $('.retailerButtons').removeClass('btn-primary').addClass('btn-default');
            $('#retailerButton-'+retailer).removeClass('btn-default').addClass('btn-primary');

            $selectRetailer.val(retailer);

            if (callRetailerChange && callRetailerChange == true){
                retailerChanged();   
            }
            else{
                $('#multiSelectArea').show();
                $('#fourBannersArea').show();
            }
        }
    }

    function hoverFlyout0Node(currentElement, divElement)
    {
      $('.selectedFlyout0Node').removeClass('selectedFlyout0Node');
      $('#'+currentElement).addClass('selectedFlyout0Node');
      $('.selectedFlyoutDetailDiv').removeClass('selectedFlyoutDetailDiv');
      $('#'+divElement).addClass('selectedFlyoutDetailDiv');
    }

    function flyoutNodeClicked (nodeId, nodeName, dept)
    {
      execSearch ({nodeId: nodeId,
                    nodeName: nodeName,
                    dept: dept,
                    lookupBrowseNode: true});
    }

    function brandClicked(index){
        
        if($('#brandItem'+index).parent().find('input').is(':checked')){
            $('.brandCheckbox').each(function(){
                if ($(this).attr('id') && $(this).parent().find('input').is(':checked')){
                    if ($(this).attr('id') == 'brandItem'+index){

                    }
                    else
                    {
                        $(this).prop('checked', false);

                    }
                }
            });   
        }
    }

    function applyFiltersClicked(params){

        if (params && params.filterBy){
            switch(params.filterBy){
                case 'price':
                    if (sessionStorage && sessionStorage.getItem('currentRetailer')
                        && sessionStorage.getItem(sessionStorage.getItem('currentRetailer')+'-currentSearchParams'))
                    {
                        var currentRetailer = sessionStorage.getItem('currentRetailer');
                        var currentSearchParams = JSON.parse(sessionStorage.getItem(currentRetailer+'-currentSearchParams'));
                        var minPrice = params.minPrice;
                        var maxPrice = params.maxPrice;

                        if (minPrice != ''){
                            minPrice = parseInt(minPrice) * 100;
                        }

                        if (maxPrice != ''){
                            maxPrice = parseInt(maxPrice) * 100;
                        }

                        execSearch({
                                    dept: currentSearchParams.dept,
                                    retailer: currentRetailer,
                                    keyw: currentSearchParams.keyw,
                                    nodeId: currentSearchParams.nodeId,
                                    nodeName: currentSearchParams.nodeName,
                                    pagenum: 1,
                                    minPrice: minPrice,
                                    maxPrice: maxPrice,
                                    brand: currentSearchParams.brands,
                                    discount: currentSearchParams.discount,
                                    lookupBrowseNode: true
                                    });                
                    }
                    break;
                case 'discount':
                    if (sessionStorage && sessionStorage.getItem('currentRetailer')
                        && sessionStorage.getItem(sessionStorage.getItem('currentRetailer')+'-currentSearchParams'))
                    {
                        var currentRetailer = sessionStorage.getItem('currentRetailer');
                        var currentSearchParams = JSON.parse(sessionStorage.getItem(currentRetailer+'-currentSearchParams'));
                        
                        var value = params.discount;

                        execSearch({
                                    dept: currentSearchParams.dept,
                                    retailer: currentRetailer,
                                    keyw: currentSearchParams.keyw,
                                    nodeId: currentSearchParams.nodeId,
                                    nodeName: currentSearchParams.nodeName,
                                    pagenum: 1,
                                    minPrice: currentSearchParams.minPrice,
                                    maxPrice: currentSearchParams.maxPrice,
                                    brand: currentSearchParams.brand,
                                    discount: value,
                                    lookupBrowseNode: true
                                    });                
                    }
                    break;
                default:
                    break;
            }
        }
        else
        {
            if (sessionStorage && sessionStorage.getItem('currentRetailer')
                && sessionStorage.getItem(sessionStorage.getItem('currentRetailer')+'-currentSearchParams'))
            {
                var currentRetailer = sessionStorage.getItem('currentRetailer');
                var currentSearchParams = JSON.parse(sessionStorage.getItem(currentRetailer+'-currentSearchParams'));
                var brands = [];
                var minPrice, maxPrice = '';

                $('.brandCheckbox').each(function(){
                    if ($(this).val() && $(this).parent().find('input').is(':checked')){
                        brands.push($(this).val());
                        console.log($(this).val());
                    }
                });

                if ($('#minPrice').val() == ''){
                    minPrice = '';
                }
                else
                {
                    minPrice = $('#minPrice').val() * 100;    
                }
                
                if ($('#maxPrice').val() == ''){
                    maxPrice = '';
                }
                else
                {
                    maxPrice = $('#maxPrice').val() * 100;
                }

                console.log({
                            brand: brands,
                            minPrice: minPrice,
                            maxPrice: maxPrice
                            });

                execSearch({
                            dept: currentSearchParams.dept,
                            retailer: currentRetailer,
                            keyw: currentSearchParams.keyw,
                            nodeId: currentSearchParams.nodeId,
                            nodeName: currentSearchParams.nodeName,
                            pagenum: 1,
                            minPrice: minPrice,
                            maxPrice: maxPrice,
                            brand: brands.join(),
                            discount: currentSearchParams.discount,
                            lookupBrowseNode: true
                            });                
            }
        }
    }

    function moreResults(){
        if (sessionStorage && sessionStorage.getItem('currentResultsPageNum')){
            var searchPageNum = parseInt(sessionStorage.getItem('currentResultsPageNum'));
            searchPageNum++;

            if (sessionStorage.getItem('currentRetailer')){
                var currentRetailer = sessionStorage.getItem('currentRetailer');

                if (sessionStorage.getItem(currentRetailer+'-currentSearchParams')){
                    var searchParams = JSON.parse(sessionStorage.getItem(currentRetailer+'-currentSearchParams'));

                    execSearch({nodeId: searchParams.nodeId, 
                                nodeName: searchParams.nodeName,
                                dept: searchParams.dept,
                                minPrice: searchParams.minPrice,
                                maxPrice: searchParams.maxPrice,
                                brand: searchParams.brand,
                                lookupBrowseNode:searchParams.lookupBrowseNode, 
                                pagenum:searchPageNum});
                }
            }
        }
    }

    function setDept(dept, nodeId, nodeName){
        var department = '';

        if (dept && dept != '' && nodeId && nodeId != '' && nodeName && nodeName != ''){
            switch(dept){
                case 'Apparel':
                case 'Fashion':
                case 'FashionGirls':
                case 'FashionBoys':
                case 'FashionBaby':
                    department = 'Apparel';
                    break;

                case 'FashionWomen':
                case 'FashionMen':
                    switch(nodeId){
                        case '1040660':
                        case '1040658':
                            department = 'Apparel';
                            break;
                        case '679337011':
                        case '679425011':
                        case '679394011':
                        case '15743631':
                        case '679312011':
                        case '679319011':
                            department = 'Shoes';
                        default:
                            break;
                    }
                    break;
                default:
                    break;
            }

            if (department != ''){
                $selectDept.val(department);
            }
        }        
    }

    function catPickHandler(catId){
        console.log('catPickHandler clicked');
        if (sessionStorage && sessionStorage.getItem('currentRetailer')){
            var currentRetailer = sessionStorage.getItem('currentRetailer');
        }
        else
        {
            var currentRetailer = $selectRetailer.val();
        }
        console.log('catPick retailer: ' + currentRetailer);
        if (currentRetailer == 'IN'){
            switch(catId){
                // BEGIN APPAREL
                case 'Apparel':
                    execSearch({nodeId: '1571272031',
                                nodeName: 'Clothing & Accessories', 
                                dept: 'Apparel',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelWomen':
                    execSearch({nodeId: '1953602031', 
                                nodeName: 'Women', 
                                dept: 'Apparel',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelMen':
                    execSearch({nodeId: '1968024031', 
                                nodeName: 'Men',
                                dept: 'Apparel',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelGirls':
                    execSearch({nodeId: '1967936031', 
                                nodeName: 'Girls',
                                dept: 'Apparel',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelBoys':
                    execSearch({nodeId: '1967851031', 
                                nodeName: 'Boys',
                                dept: 'Apparel',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelBaby':
                    execSearch({nodeId: '1953148031', 
                                nodeName: 'Baby',
                                dept: 'Apparel',
                                lookupBrowseNode:true});
                    break;
                // END APPAREL

                // BEGIN SHOES
                case 'Shoes':
                    execSearch({nodeId: '1571284031', 
                                nodeName: 'Baby',
                                dept: 'Shoes',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesWomenSandals':
                    execSearch({nodeId: '1983633031', 
                                dept: 'Shoes',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesWomenCasual':
                    execSearch({nodeId: '9780815031', 
                                dept: 'Shoes',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesHandbags':
                    execSearch({nodeId: '1983338031', 
                                dept: 'Shoes',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesMenCasual':
                    execSearch({nodeId: '9780814031', 
                                dept: 'Shoes',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesMenFormal':
                    execSearch({nodeId: '1983572031', 
                                dept: 'Shoes',
                                lookupBrowseNode:true});
                    break;    
                // END SHOES

                // BEGIN BEAUTY
                case 'Beauty':
                    execSearch({nodeId: '1355017031', 
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautyBath':
                    execSearch({nodeId: '1374276031', 
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautyFragrance':
                    execSearch({nodeId: '1374298031', 
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautyHair':
                    execSearch({nodeId: '1374305031', 
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautyNails':
                    execSearch({nodeId: '1374357031', 
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautySkin':
                    execSearch({nodeId: '1374407031', 
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                // END BEAUTY

                // BEGIN SPORTING
                case 'SportingGoods':
                    execSearch({nodeId: '1984444031', 
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsExercise':
                    execSearch({nodeId: '3403635031', 
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsCamping':
                    execSearch({nodeId: '1984988031', 
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsClothing':
                    execSearch({nodeId: '3403666031', 
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsRunning':
                    execSearch({nodeId: '3403659031', 
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsClimbing':
                    execSearch({nodeId: '3403627031', 
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                // END SPORTING
            }
        }
        else //US
        {
            switch(catId){
                // BEGIN APPAREL
                case 'Apparel':
                    execSearch({nodeId: '7141124011', 
                                nodeName: 'Departments',
                                dept: 'Fashion',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelWomen':
                    execSearch({nodeId: '1040660', 
                                nodeName: 'Clothing',
                                dept: 'FashionWomen',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelMen':
                    execSearch({nodeId: '1040658', 
                                nodeName: 'Clothing',
                                dept: 'FashionMen',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelGirls':
                    execSearch({nodeId: '1040664', 
                                nodeName: 'Clothing',
                                dept: 'FashionGirls',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelBoys':
                    execSearch({nodeId: '1040666', 
                                nodeName: 'Clothing',
                                dept: 'FashionBoys',
                                lookupBrowseNode:true});
                    break;
                case 'ApparelBaby':
                    execSearch({nodeId: '7147444011',
                                nodeName: 'Baby', 
                                dept: 'FashionBaby',
                                lookupBrowseNode:true});
                    break;
                // END APPAREL

                // BEGIN SHOES
                case 'Shoes':
                    execSearch({nodeId: '679337011', 
                                nodeName: 'Shoes',
                                dept: 'FashionWomen',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesWomenSandals':
                    execSearch({nodeId: '679425011', 
                                nodeName: 'Sandals',
                                dept: 'FashionWomen',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesWomenCasual':
                    execSearch({nodeId: '679394011', 
                                nodeName: 'Fashion Sneakers',
                                dept: 'FashionWomen',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesHandbags':
                    execSearch({nodeId: '15743631', 
                                nodeName: 'Handbags & Wallets',
                                dept: 'FashionWomen',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesMenCasual':
                    execSearch({nodeId: '679312011', 
                                nodeName: 'Fashion Sneakers',
                                dept: 'FashionMen',
                                lookupBrowseNode:true});
                    break;
                case 'ShoesMenFormal':
                    execSearch({nodeId: '679319011', 
                                nodeName: 'Oxfords',
                                dept: 'FashionMen',
                                lookupBrowseNode:true});
                    break;    
                // END SHOES

                // BEGIN BEAUTY
                case 'Beauty':
                    execSearch({nodeId: '11055981', 
                                nodeName: 'Products',
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautyBath':
                    execSearch({nodeId: '3777891', 
                                nodeName: 'Personal Care',
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautyFragrance':
                    execSearch({nodeId: '11056591', 
                                nodeName: 'Fragrance',
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautyHair':
                    execSearch({nodeId: '11057241', 
                                nodeName: 'Hair Care',
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautyNails':
                    execSearch({nodeId: '17242866011',
                                nodeName: 'Foot, Hand & Nail Care', 
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                case 'BeautySkin':
                    execSearch({nodeId: '11060451', 
                                nodeName: 'Skin Care',
                                dept: 'Beauty',
                                lookupBrowseNode:true});
                    break;
                // END BEAUTY

                // BEGIN SPORTING
                case 'SportingGoods':
                    execSearch({nodeId: '3375301', 
                                nodeName: 'Categories',
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsExercise':
                    execSearch({nodeId: '3407731', 
                                nodeName: 'Exercise & Fitness',
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsCamping':
                    execSearch({nodeId: '3400371', 
                                nodeName: 'Camping & Hiking',
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsClothing':
                    execSearch({nodeId: '11444071011',
                                nodeName: 'Clothing', 
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsRunning':
                    execSearch({nodeId: '3416071', 
                                nodeName: 'Running',
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                case 'SportingGoodsClimbing':
                    execSearch({nodeId: '3402401', 
                                nodeName: 'Climbing',
                                dept: 'SportingGoods',
                                lookupBrowseNode:true});
                    break;
                // END SPORTING
            }
        }
    }

    function updateWishlistDropdownViewItem() {
      var activeWishlists = []
      if (sessionStorage && sessionStorage.getItem('activeWishlists')
            && sessionStorage.getItem('activeWishlists') != '')
      {
        activeWishlists = JSON.parse(sessionStorage.getItem('activeWishlists'));
      }

      var divText = '';

      if (activeWishlists && activeWishlists.constructor === Array && activeWishlists.length > 0)
      {
        for (i=0; i<activeWishlists.length; i++)
        {
          var wishlist = activeWishlists[i];
          divText += '<option value="'+wishlist.wishlistId+'">'+wishlist.wishlistName+" ("+
            wishlist.itemCount+" items)</option>";
        }
      }

      divText += '<option value="new">New Wishlist</option>';

      $wishlistDropdownViewItem.empty();
      $wishlistDropdownViewItem.append(divText);
      wishlistDropdownChangedViewItem();

      $('#wishlistAddedSuccessMessage-viewitem').hide();
      $('#wishlistAddedFailMessage-viewitem').hide();
    }

    function wishlistDropdownChangedViewItem() {
      var val = $wishlistDropdownViewItem.val();

      $wishlistNameInputViewItem.removeClass('requiredInputBorderHighlight');

      if (val == 'new')
      {
        $wishlistNameInputViewItem.show();
      }
      else
      {
        $wishlistNameInputViewItem.hide();
      }
    } 

    function wishListItemAddClickedViewItem() {
      var val = $wishlistDropdownViewItem.val();
      console.log('wishlist name value = '+val);

      if (val == 'new')
      {
        if ($wishlistNameInputViewItem.val() == '')
        {
          console.log('yes, true');
          $wishlistNameInputViewItem.addClass('requiredInputBorderHighlight');
          setTimeout(function(){
            $wishlistNameInputViewItem.removeClass('requiredInputBorderHighlight');
          }, 3000);
        }
        else
        {
          if (sessionStorage && sessionStorage.getItem('huddlieId') 
                && sessionStorage.getItem('huddlieId') != ''
                && sessionStorage.getItem('parentItem')
                && sessionStorage.getItem('parentItem') != '')
          {
            var visitorId = sessionStorage.getItem('huddlieId');
            var wishlistName = $wishlistNameInputViewItem.val();
            var item = JSON.parse(sessionStorage.getItem('parentItem'));

            socket.emit('createWishlistAndAddItemViewItem',{visitorId: visitorId,
                                                            wishlistName: wishlistName,
                                                            item: item});

            $(".overlay").show();
          }
        }
      }
      else
      {
        if (sessionStorage && sessionStorage.getItem('huddlieId') 
              && sessionStorage.getItem('huddlieId') != ''
              && sessionStorage.getItem('parentItem')
              && sessionStorage.getItem('parentItem') != '')
        {
          var visitorId = sessionStorage.getItem('huddlieId');
          var item = JSON.parse(sessionStorage.getItem('parentItem'));
          var wishlistId = val;

          socket.emit('insertWishlistItemViewItem',{visitorId: visitorId,
                                                    wishlistId: wishlistId,
                                                    item: item});

          $(".overlay").show();
        }
      }
    }

    socket.on('createWishlistAndAddItemViewItemCB', function(data){
      if (data && data.isSuccess && data.isSuccess == true)
      {
        var wishlists = [];

        if (sessionStorage && sessionStorage.getItem('activeWishlists') 
                && sessionStorage.getItem('activeWishlists') != ''
                && JSON.parse(sessionStorage.getItem('activeWishlists')).constructor === Array)
        {
          wishlists = JSON.parse(sessionStorage.getItem('activeWishlists'));
        }

        wishlists.push(data.wishlist);

        sessionStorage.setItem('activeWishlists', JSON.stringify(wishlists));
        updateWishlistDropdownViewItem();

        $('#wishlistAddedSuccessMessage-viewitem').show();
        setTimeout(function(){
          $('#wishlistAddedSuccessMessage-viewitem').hide();
        },3000);

        $(".overlay").hide();
        $wishlistNameInputViewItem.val('');
      }
      else
      {
        $('#wishlistAddedFailMessage-viewitem').show();
        setTimeout(function(){
          $('#wishlistAddedFailMessage-viewitem').hide();
        },3000);

        $(".overlay").hide();
        $wishlistNameInputViewItem.val('');
      }
    });

    socket.on('insertWishlistItemViewItemCB', function(data){
      if (data && data.isSuccess && data.isSuccess == true)
      {
        var wishlists = [];

        if (sessionStorage && sessionStorage.getItem('activeWishlists') 
                && sessionStorage.getItem('activeWishlists') != ''
                && JSON.parse(sessionStorage.getItem('activeWishlists')).constructor === Array)
        {
          wishlists = JSON.parse(sessionStorage.getItem('activeWishlists'));
        }

        var wishlist = data.wishlist;

        if (wishlists && wishlists.constructor === Array && wishlists.length > 0)
        {
          for (i=0; i<wishlists.length; i++)
          {
            if (wishlists[i] && wishlists[i].wishlistId == wishlist.wishlistId)
            {
              wishlists[i].itemCount = wishlist.itemCount;
              break;
            }
          }
        }

        sessionStorage.setItem('activeWishlists', JSON.stringify(wishlists));
        updateWishlistDropdownViewItem();

        $('#wishlistAddedSuccessMessage-viewitem').show();
        setTimeout(function(){
          $('#wishlistAddedSuccessMessage-viewitem').hide();
        },3000);

        $(".overlay").hide();
        $wishlistNameInputViewItem.val('');
      }
      else
      {
        $('#wishlistAddedFailMessage-viewitem').show();
        setTimeout(function(){
          $('#wishlistAddedFailMessage-viewitem').hide();
        },3000);

        $(".overlay").hide();
        $wishlistNameInputViewItem.val('');
      }
    });

    $('#searchWords').autocomplete({
        source: function(Query, Response) {
            $.ajax({
                url: "https://completion.amazon.com/search/complete",
                  dataType: "jsonp",
                  data: {
                    q: Query.term,
                    "search-alias": "aps",
                    client: "amazon-search-ui",
                    mkt: 1,

                  },
                success: function(Data) {
                  
                    if (Data) {
                        var DataArr = Data.toString().split(',');
                        var Queries = new Array();
                        for (var q = 1; q < (DataArr.length - 1); q++) {
                            DataArr[q] = $.trim(DataArr[q]);
                            if (0 < DataArr[q].length && DataArr[q] != '[object Object]' && !$.isNumeric(DataArr[q])) {
                                Queries.push(DataArr[q]);
                            }
                        }
                        if (0 < Queries.length) {
                            Response(Queries);
                        }
                    }
                }
            });
        },
        delay: 1000,
        minLength: 2
    });

</script>


  
</body>
</html>